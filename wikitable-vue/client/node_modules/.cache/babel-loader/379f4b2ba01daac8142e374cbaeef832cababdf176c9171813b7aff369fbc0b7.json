{"ast":null,"code":"import { ref, onMounted, computed, watch, nextTick } from \"vue\";\nimport api from \"@/api\";\nimport CommentStats from \"./CommentStats.vue\";\nimport ChartLegend from \"./ChartLegend.vue\";\n\n// 原有脚本内容保持不变...\n\nexport default {\n  __name: 'ArticleContent',\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const __returned__ = {\n      ref,\n      onMounted,\n      computed,\n      watch,\n      nextTick,\n      get api() {\n        return api;\n      },\n      CommentStats,\n      ChartLegend\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","nextTick","api","CommentStats","ChartLegend"],"sources":["D:/ZhiHu/zhihu-bullet/wikitable-vue/client/src/components/ArticleContent.vue"],"sourcesContent":["<template>\r\n\t<!-- 顶部控制面板（保持不变） -->\r\n\t<div class=\"control-panel\">\r\n\t\t<!-- 控制按钮组 -->\r\n\t\t<div class=\"control-group-container\">\r\n\t\t\t<!-- 各控制按钮 -->\r\n\t\t</div>\r\n\r\n\t\t<!-- 滑动条 -->\r\n\t\t<div class=\"slider-group\" v-if=\"showInlineComments\">\r\n\t\t\t<!-- 滑动条内容 -->\r\n\t\t</div>\r\n\r\n\t\t<!-- 评论类型图注 -->\r\n\t\t<div class=\"comment-type-legend\">\r\n\t\t\t<div class=\"legend-item\">\r\n\t\t\t\t<span class=\"underline blue\">【陈述】</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"legend-item\">\r\n\t\t\t\t<span class=\"circle red\">【疑问】</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"legend-item\">\r\n\t\t\t\t<span class=\"double-underline green\">【感叹】</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"legend-item\">\r\n\t\t\t\t<span class=\"solid-underline purple\">【建议】</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"legend-item\">\r\n\t\t\t\t<span class=\"rounded-box orange\">【讽刺】</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<!-- 三栏主要内容区 -->\r\n\t<div class=\"main-content\">\r\n\t\t<!-- 第一栏：文章整体评论 -->\r\n\t\t<div class=\"panel global-comments-panel\" v-if=\"globalComments.length > 0\">\r\n\t\t\t<!-- 全局评论内容 -->\r\n\t\t</div>\r\n\r\n\t\t<!-- 第二栏：文章内容 -->\r\n\t\t<div class=\"panel article-panel\" v-if=\"article\" ref=\"articleContainer\">\r\n\t\t\t<h1 class=\"article-title\">{{ article.title }}</h1>\r\n\t\t\t<div class=\"article-meta\">\r\n\t\t\t\t<!-- 文章元信息 -->\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"article-content\">\r\n\t\t\t\t<template v-for=\"(sentence, index) in sentences\" :key=\"index\">\r\n\t\t\t\t\t<!-- 句子前的统计图表 -->\r\n\t\t\t\t\t<CommentStats\r\n\t\t\t\t\t\tv-if=\"hasComments(index) && showStackedCharts\"\r\n\t\t\t\t\t\t:comments=\"getCommentsForSentence(index)\"\r\n\t\t\t\t\t\t:show-emotion=\"false\"\r\n\t\t\t\t\t\tclass=\"before-stats\" />\r\n\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclass=\"sentence\"\r\n\t\t\t\t\t\t:id=\"'sentence-' + index\"\r\n\t\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\t\t'has-comment': hasComments(index),\r\n\t\t\t\t\t\t\t[`comment-level-${getCommentLevel(index).level}`]:\r\n\t\t\t\t\t\t\t\thasComments(index),\r\n\t\t\t\t\t\t\t[`comment-type-${getCommentType(getTopComment(index))}`]:\r\n\t\t\t\t\t\t\t\thasComments(index),\r\n\t\t\t\t\t\t\tactive: activeSentence === index\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t@mouseenter=\"highlightComments(index)\"\r\n\t\t\t\t\t\t@mouseleave=\"unhighlightComments\">\r\n\t\t\t\t\t\t{{ sentence }}\r\n\t\t\t\t\t\t<sup v-if=\"hasComments(index)\" class=\"annotation-marker\">\r\n\t\t\t\t\t\t\t{{ getCommentsForSentence(index).length }}\r\n\t\t\t\t\t\t</sup>\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t<!-- 句子后的统计图表 -->\r\n\t\t\t\t\t<CommentStats\r\n\t\t\t\t\t\tv-if=\"hasComments(index) && showPieCharts\"\r\n\t\t\t\t\t\t:comments=\"getCommentsForSentence(index)\"\r\n\t\t\t\t\t\t:show-standpoint=\"false\"\r\n\t\t\t\t\t\t:show-type=\"true\"\r\n\t\t\t\t\t\tclass=\"after-stats\" />\r\n\r\n\t\t\t\t\t<!-- 内联评论 -->\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tv-if=\"showInlineComments && showTopCommentInline(index)\"\r\n\t\t\t\t\t\tclass=\"inline-comment\"\r\n\t\t\t\t\t\t:class=\"`comment-type-${getCommentType(getTopComment(index))}`\"\r\n\t\t\t\t\t\t@mouseenter=\"highlightComments(index)\"\r\n\t\t\t\t\t\t@mouseleave=\"unhighlightComments\">\r\n\t\t\t\t\t\t【{{ getCommentTypeLabel(getTopComment(index)) }}：{{\r\n\t\t\t\t\t\t\tformatCommentContent(getTopComment(index).content)\r\n\t\t\t\t\t\t}}】\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"article-footer\">\r\n\t\t\t\t<!-- 文章页脚 -->\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 第三栏：句子相关评论 -->\r\n\t\t<div\r\n\t\t\tclass=\"panel annotation-panel\"\r\n\t\t\tv-if=\"activeSentence !== null && hasComments(activeSentence)\"\r\n\t\t\tref=\"annotationPanel\">\r\n\t\t\t<!-- 相关评论内容 -->\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<!-- 连接线容器 -->\r\n\t<div class=\"connection-container\" ref=\"connectionContainer\">\r\n\t\t<svg\r\n\t\t\tclass=\"connection-line\"\r\n\t\t\tv-if=\"activeSentence !== null && hasComments(activeSentence)\"\r\n\t\t\t:style=\"connectionStyle\">\r\n\t\t\t<line\r\n\t\t\t\tx1=\"0\"\r\n\t\t\t\ty1=\"0\"\r\n\t\t\t\tx2=\"100%\"\r\n\t\t\t\ty2=\"0\"\r\n\t\t\t\tstroke=\"#FF5722\"\r\n\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\tstroke-dasharray=\"4,2\" />\r\n\t\t</svg>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, computed, watch, nextTick } from \"vue\";\r\n\timport api from \"@/api\";\r\n\timport CommentStats from \"./CommentStats.vue\";\r\n\timport ChartLegend from \"./ChartLegend.vue\";\r\n\r\n\t// 原有脚本内容保持不变...\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 原有样式保持不变... */\r\n\r\n\t/* 新增的评论类型样式 */\r\n\t.sentence.has-comment.comment-type-1 {\r\n\t\ttext-decoration: blue wavy underline;\r\n\t\ttext-decoration-thickness: 2px;\r\n\t}\r\n\r\n\t.sentence.has-comment.comment-type-2 {\r\n\t\toutline: 2px dotted #ea4335;\r\n\t\tborder-radius: 50%;\r\n\t\tpadding: 0 2px;\r\n\t}\r\n\r\n\t.sentence.has-comment.comment-type-3 {\r\n\t\ttext-decoration: green double underline;\r\n\t\ttext-decoration-thickness: 2px;\r\n\t}\r\n\r\n\t.sentence.has-comment.comment-type-4 {\r\n\t\ttext-decoration: purple solid underline;\r\n\t\ttext-decoration-thickness: 2px;\r\n\t}\r\n\r\n\t.sentence.has-comment.comment-type-5 {\r\n\t\toutline: 2px solid #ff9800;\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 0 2px;\r\n\t}\r\n\r\n\t/* 内联评论样式 */\r\n\t.inline-comment {\r\n\t\tfont-size: 0.85em;\r\n\t\tmargin-left: 0.5em;\r\n\t}\r\n\r\n\t.inline-comment.comment-type-1 {\r\n\t\tcolor: #4285f4;\r\n\t}\r\n\r\n\t.inline-comment.comment-type-2 {\r\n\t\tcolor: #ea4335;\r\n\t}\r\n\r\n\t.inline-comment.comment-type-3 {\r\n\t\tcolor: #34a853;\r\n\t}\r\n\r\n\t.inline-comment.comment-type-4 {\r\n\t\tcolor: #9c27b0;\r\n\t}\r\n\r\n\t.inline-comment.comment-type-5 {\r\n\t\tcolor: #ff9800;\r\n\t}\r\n</style>\r\n"],"mappings":"AAkIC,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,KAAK;AAC/D,OAAOC,GAAG,MAAM,OAAO;AACvB,OAAOC,YAAY,MAAM,oBAAoB;AAC7C,OAAOC,WAAW,MAAM,mBAAmB;;AAE3C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}