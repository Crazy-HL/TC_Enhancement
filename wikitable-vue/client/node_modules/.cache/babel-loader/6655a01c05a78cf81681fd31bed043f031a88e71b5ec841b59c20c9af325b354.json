{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1a0c44a0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"comment-stats-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"standpoint-chart\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"chart-title\"\n}, \"评论立场分布\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"stacked-bar\"\n};\nconst _hoisted_5 = [\"title\"];\nconst _hoisted_6 = [\"title\"];\nconst _hoisted_7 = [\"title\"];\nconst _hoisted_8 = {\n  class: \"chart-legend\"\n};\nconst _hoisted_9 = {\n  class: \"legend-item support\"\n};\nconst _hoisted_10 = {\n  class: \"legend-item neutral\"\n};\nconst _hoisted_11 = {\n  class: \"legend-item oppose\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"emotion-chart\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"chart-title\"\n}, \"评论情感分布\", -1 /* HOISTED */));\nconst _hoisted_14 = {\n  class: \"chart-legend\"\n};\nconst _hoisted_15 = {\n  class: \"legend-item positive\"\n};\nconst _hoisted_16 = {\n  class: \"legend-item negative\"\n};\nconst _hoisted_17 = {\n  class: \"legend-item neutral\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 立场堆叠图 (放在句子前面) \"), $props.showStandpointChart ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", {\n    class: \"bar-segment support\",\n    style: _normalizeStyle({\n      width: `${$setup.standpointPercent.support}%`\n    }),\n    title: `支持: ${$setup.standpointPercent.support}%`\n  }, null, 12 /* STYLE, PROPS */, _hoisted_5), _createElementVNode(\"div\", {\n    class: \"bar-segment neutral\",\n    style: _normalizeStyle({\n      width: `${$setup.standpointPercent.neutral}%`\n    }),\n    title: `中立: ${$setup.standpointPercent.neutral}%`\n  }, null, 12 /* STYLE, PROPS */, _hoisted_6), _createElementVNode(\"div\", {\n    class: \"bar-segment oppose\",\n    style: _normalizeStyle({\n      width: `${$setup.standpointPercent.oppose}%`\n    }),\n    title: `反对: ${$setup.standpointPercent.oppose}%`\n  }, null, 12 /* STYLE, PROPS */, _hoisted_7)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, \"支持 \" + _toDisplayString($setup.standpointPercent.support) + \"%\", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_10, \"中立 \" + _toDisplayString($setup.standpointPercent.neutral) + \"%\", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_11, \"反对 \" + _toDisplayString($setup.standpointPercent.oppose) + \"%\", 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 情感饼图 (放在句子后面) \"), $props.showEmotionChart ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_hoisted_13, _createElementVNode(\"div\", {\n    class: \"pie-chart\",\n    style: _normalizeStyle($setup.pieChartStyle)\n  }, [_createElementVNode(\"div\", {\n    class: \"pie-segment positive\",\n    style: _normalizeStyle($setup.positiveSegmentStyle)\n  }, null, 4 /* STYLE */), _createElementVNode(\"div\", {\n    class: \"pie-segment negative\",\n    style: _normalizeStyle($setup.negativeSegmentStyle)\n  }, null, 4 /* STYLE */), _createElementVNode(\"div\", {\n    class: \"pie-segment neutral\",\n    style: _normalizeStyle($setup.neutralSegmentStyle)\n  }, null, 4 /* STYLE */)], 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"span\", _hoisted_15, \"积极 \" + _toDisplayString($setup.emotionPercent.positive) + \"%\", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_16, \"消极 \" + _toDisplayString($setup.emotionPercent.negative) + \"%\", 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_17, \"中立 \" + _toDisplayString($setup.emotionPercent.neutral) + \"%\", 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","$props","showStandpointChart","_hoisted_2","_hoisted_3","_hoisted_4","style","_normalizeStyle","width","$setup","standpointPercent","support","title","_hoisted_5","neutral","_hoisted_6","oppose","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","showEmotionChart","_hoisted_12","_hoisted_13","pieChartStyle","positiveSegmentStyle","negativeSegmentStyle","neutralSegmentStyle","_hoisted_14","_hoisted_15","emotionPercent","positive","_hoisted_16","negative","_hoisted_17"],"sources":["D:\\ZhiHu\\zhihu-bullet\\wikitable-vue\\client\\src\\components\\CommentStats.vue"],"sourcesContent":["<template>\r\n\t<div class=\"comment-stats-container\">\r\n\t\t<!-- 立场堆叠图 (放在句子前面) -->\r\n\t\t<div v-if=\"showStandpointChart\" class=\"standpoint-chart\">\r\n\t\t\t<div class=\"chart-title\">评论立场分布</div>\r\n\t\t\t<div class=\"stacked-bar\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"bar-segment support\"\r\n\t\t\t\t\t:style=\"{ width: `${standpointPercent.support}%` }\"\r\n\t\t\t\t\t:title=\"`支持: ${standpointPercent.support}%`\"></div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"bar-segment neutral\"\r\n\t\t\t\t\t:style=\"{ width: `${standpointPercent.neutral}%` }\"\r\n\t\t\t\t\t:title=\"`中立: ${standpointPercent.neutral}%`\"></div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"bar-segment oppose\"\r\n\t\t\t\t\t:style=\"{ width: `${standpointPercent.oppose}%` }\"\r\n\t\t\t\t\t:title=\"`反对: ${standpointPercent.oppose}%`\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"chart-legend\">\r\n\t\t\t\t<span class=\"legend-item support\"\r\n\t\t\t\t\t>支持 {{ standpointPercent.support }}%</span\r\n\t\t\t\t>\r\n\t\t\t\t<span class=\"legend-item neutral\"\r\n\t\t\t\t\t>中立 {{ standpointPercent.neutral }}%</span\r\n\t\t\t\t>\r\n\t\t\t\t<span class=\"legend-item oppose\"\r\n\t\t\t\t\t>反对 {{ standpointPercent.oppose }}%</span\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 情感饼图 (放在句子后面) -->\r\n\t\t<div v-if=\"showEmotionChart\" class=\"emotion-chart\">\r\n\t\t\t<div class=\"chart-title\">评论情感分布</div>\r\n\t\t\t<div class=\"pie-chart\" :style=\"pieChartStyle\">\r\n\t\t\t\t<div class=\"pie-segment positive\" :style=\"positiveSegmentStyle\"></div>\r\n\t\t\t\t<div class=\"pie-segment negative\" :style=\"negativeSegmentStyle\"></div>\r\n\t\t\t\t<div class=\"pie-segment neutral\" :style=\"neutralSegmentStyle\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"chart-legend\">\r\n\t\t\t\t<span class=\"legend-item positive\"\r\n\t\t\t\t\t>积极 {{ emotionPercent.positive }}%</span\r\n\t\t\t\t>\r\n\t\t\t\t<span class=\"legend-item negative\"\r\n\t\t\t\t\t>消极 {{ emotionPercent.negative }}%</span\r\n\t\t\t\t>\r\n\t\t\t\t<span class=\"legend-item neutral\"\r\n\t\t\t\t\t>中立 {{ emotionPercent.neutral }}%</span\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tcomments: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tshowStandpointChart: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tshowEmotionChart: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t}\r\n\t});\r\n\r\n\t// 计算立场分布\r\n\tconst standpointStats = computed(() => {\r\n\t\tconst stats = {\r\n\t\t\tsupport: 0,\r\n\t\t\toppose: 0,\r\n\t\t\tneutral: 0,\r\n\t\t\ttotal: 0\r\n\t\t};\r\n\r\n\t\tprops.comments.forEach(comment => {\r\n\t\t\tif (comment.standpoint === 1) stats.support++;\r\n\t\t\telse if (comment.standpoint === -1) stats.oppose++;\r\n\t\t\telse stats.neutral++;\r\n\t\t\tstats.total++;\r\n\t\t});\r\n\r\n\t\treturn stats;\r\n\t});\r\n\r\n\t// 计算立场百分比\r\n\tconst standpointPercent = computed(() => {\r\n\t\tconst { support, oppose, neutral, total } = standpointStats.value;\r\n\r\n\t\treturn {\r\n\t\t\tsupport: total > 0 ? Math.round((support / total) * 100) : 0,\r\n\t\t\toppose: total > 0 ? Math.round((oppose / total) * 100) : 0,\r\n\t\t\tneutral: total > 0 ? Math.round((neutral / total) * 100) : 0\r\n\t\t};\r\n\t});\r\n\r\n\t// 计算情感分布\r\n\tconst emotionStats = computed(() => {\r\n\t\tconst stats = {\r\n\t\t\tpositive: 0,\r\n\t\t\tnegative: 0,\r\n\t\t\tneutral: 0,\r\n\t\t\ttotal: 0\r\n\t\t};\r\n\r\n\t\tprops.comments.forEach(comment => {\r\n\t\t\tif (comment.emotion === 1) stats.positive++;\r\n\t\t\telse if (comment.emotion === -1) stats.negative++;\r\n\t\t\telse stats.neutral++;\r\n\t\t\tstats.total++;\r\n\t\t});\r\n\r\n\t\treturn stats;\r\n\t});\r\n\r\n\t// 计算情感百分比\r\n\tconst emotionPercent = computed(() => {\r\n\t\tconst { positive, negative, neutral, total } = emotionStats.value;\r\n\r\n\t\treturn {\r\n\t\t\tpositive: total > 0 ? Math.round((positive / total) * 100) : 0,\r\n\t\t\tnegative: total > 0 ? Math.round((negative / total) * 100) : 0,\r\n\t\t\tneutral: total > 0 ? Math.round((neutral / total) * 100) : 0\r\n\t\t};\r\n\t});\r\n\r\n\t// 饼图样式计算\r\n\tconst pieChartStyle = computed(() => {\r\n\t\treturn {\r\n\t\t\t\"--positive-percent\": `${emotionPercent.value.positive}%`,\r\n\t\t\t\"--negative-percent\": `${emotionPercent.value.negative}%`,\r\n\t\t\t\"--neutral-percent\": `${emotionPercent.value.neutral}%`\r\n\t\t};\r\n\t});\r\n\r\n\tconst positiveSegmentStyle = computed(() => {\r\n\t\tconst deg = (emotionPercent.value.positive / 100) * 360;\r\n\t\treturn { \"--deg\": `${deg}deg` };\r\n\t});\r\n\r\n\tconst negativeSegmentStyle = computed(() => {\r\n\t\tconst positiveDeg = (emotionPercent.value.positive / 100) * 360;\r\n\t\tconst deg = (emotionPercent.value.negative / 100) * 360;\r\n\t\treturn { \"--deg\": `${deg}deg`, \"--start-deg\": `${positiveDeg}deg` };\r\n\t});\r\n\r\n\tconst neutralSegmentStyle = computed(() => {\r\n\t\tconst positiveDeg = (emotionPercent.value.positive / 100) * 360;\r\n\t\tconst negativeDeg = (emotionPercent.value.negative / 100) * 360;\r\n\t\tconst deg = (emotionPercent.value.neutral / 100) * 360;\r\n\t\treturn {\r\n\t\t\t\"--deg\": `${deg}deg`,\r\n\t\t\t\"--start-deg\": `${positiveDeg + negativeDeg}deg`\r\n\t\t};\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.comment-stats-container {\r\n\t\tdisplay: inline-flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 10px;\r\n\t\tmargin: 5px 0;\r\n\t}\r\n\r\n\t.chart-title {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t/* 立场堆叠图样式 */\r\n\t.stacked-bar {\r\n\t\tdisplay: flex;\r\n\t\theight: 16px;\r\n\t\twidth: 100px;\r\n\t\tborder-radius: 8px;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #f0f0f0;\r\n\t}\r\n\r\n\t.bar-segment {\r\n\t\theight: 100%;\r\n\t\ttransition: width 0.3s ease;\r\n\t}\r\n\r\n\t.bar-segment.support {\r\n\t\tbackground-color: #4caf50;\r\n\t}\r\n\r\n\t.bar-segment.neutral {\r\n\t\tbackground-color: #ffc107;\r\n\t}\r\n\r\n\t.bar-segment.oppose {\r\n\t\tbackground-color: #f44336;\r\n\t}\r\n\r\n\t/* 情感饼图样式 */\r\n\t.pie-chart {\r\n\t\tposition: relative;\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: conic-gradient(\r\n\t\t\t#4caf50 0% var(--positive-percent),\r\n\t\t\t#f44336 var(--positive-percent)\r\n\t\t\t\tcalc(var(--positive-percent) + var(--negative-percent)),\r\n\t\t\t#ffc107 calc(var(--positive-percent) + var(--negative-percent)) 100%\r\n\t\t);\r\n\t}\r\n\r\n\t.pie-segment {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 50%;\r\n\t\tclip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%);\r\n\t\ttransform: rotate(var(--deg));\r\n\t\ttransform-origin: 50% 50%;\r\n\t}\r\n\r\n\t.pie-segment.positive {\r\n\t\tbackground-color: #4caf50;\r\n\t\ttransform: rotate(var(--deg));\r\n\t}\r\n\r\n\t.pie-segment.negative {\r\n\t\tbackground-color: #f44336;\r\n\t\ttransform: rotate(var(--start-deg)) rotate(var(--deg));\r\n\t}\r\n\r\n\t.pie-segment.neutral {\r\n\t\tbackground-color: #ffc107;\r\n\t\ttransform: rotate(calc(var(--start-deg))) rotate(var(--deg));\r\n\t}\r\n\r\n\t/* 图例样式 */\r\n\t.chart-legend {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 6px;\r\n\t\tfont-size: 11px;\r\n\t\tmargin-top: 5px;\r\n\t}\r\n\r\n\t.legend-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.legend-item::before {\r\n\t\tcontent: \"\";\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 10px;\r\n\t\theight: 10px;\r\n\t\tmargin-right: 3px;\r\n\t\tborder-radius: 2px;\r\n\t}\r\n\r\n\t.legend-item.positive::before {\r\n\t\tbackground-color: #4caf50;\r\n\t}\r\n\r\n\t.legend-item.negative::before {\r\n\t\tbackground-color: #f44336;\r\n\t}\r\n\r\n\t.legend-item.neutral::before {\r\n\t\tbackground-color: #ffc107;\r\n\t}\r\n\r\n\t.legend-item.support::before {\r\n\t\tbackground-color: #4caf50;\r\n\t}\r\n\r\n\t.legend-item.oppose::before {\r\n\t\tbackground-color: #f44336;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}