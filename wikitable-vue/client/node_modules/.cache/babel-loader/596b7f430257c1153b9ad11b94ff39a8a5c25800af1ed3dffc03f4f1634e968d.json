{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed, watch, onMounted } from \"vue\";\nconst defaultAvatar = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2NjYyIgZD0iTTEyLDJBMTAsMTAgMCAwLDAgMiwxMkExMCwxMCAwIDAsMCAxMiwyMkExMCwxMCAwIDAsMCAyMiwxMkExMCwxMCAwIDAsMCAxMiwyTTEyLDRBNyA3IDAgMCwxIDE5LDExQTcgNyAwIDAsMSAxMiwxOEE3LDcgMCAwLDEgNSwxMUE3LDcgMCAwLDEgMTIsNE0xMiw2QTUsNSAwIDAsMCA3LDExQTUsNSAwIDAsMCAxMiwxNkE1LDUgMCAwLDAgMTcsMTFBNSw1IDAgMCwwIDEyLDZNMTIsOEEzLDMgMCAwLDEgMTUsMTFBNCw0IDAgMCwxIDEyLDE1QTQsNCAwIDAsMSA5LDExQTMsMyAwIDAsMSAxMiw4WiIvPjwvc3ZnPg==\";\n\n// 弹幕数据\n\nexport default {\n  __name: 'DanmuDisplay',\n  props: {\n    comments: Array,\n    activeSentence: Number,\n    maxLines: {\n      type: Number,\n      default: 3,\n      validator: value => value >= 1 && value <= 8\n    },\n    lineHeight: {\n      type: Number,\n      default: 40,\n      validator: value => value >= 30 && value <= 120\n    },\n    maxDanmus: {\n      type: Number,\n      default: 5,\n      validator: value => value >= 1 && value <= 15\n    },\n    baseSpeed: {\n      type: Number,\n      default: 10,\n      validator: value => value >= 5 && value <= 30\n    },\n    styleType: {\n      type: String,\n      default: \"text\",\n      validator: value => [\"text\", \"card\"].includes(value)\n    },\n    cardWidth: {\n      type: Number,\n      default: 280,\n      validator: value => value >= 200 && value <= 400\n    },\n    textFontSize: {\n      type: Number,\n      default: 16,\n      validator: value => value >= 12 && value <= 24\n    },\n    cardFontSize: {\n      type: Number,\n      default: 14,\n      validator: value => value >= 12 && value <= 20\n    },\n    opacity: {\n      type: Number,\n      default: 85,\n      validator: value => value >= 30 && value <= 100\n    },\n    showAvatars: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n\n    // 默认头像\n    const danmuContainer = ref(null);\n    const allDanmus = ref([]);\n    const lineOccupancy = ref([]);\n\n    // 计算可见弹幕\n    const visibleDanmus = computed(() => {\n      cleanExpiredDanmus();\n      return allDanmus.value.slice(-props.maxDanmus * 2);\n    });\n\n    // 获取随机颜色\n    const getRandomColor = () => {\n      const colors = [\"#FF6B6B\", \"#4ECDC4\", \"#45B7D1\", \"#FFA07A\", \"#98D8C8\", \"#F06292\", \"#7986CB\", \"#9575CD\", \"#64B5F6\", \"#4DB6AC\", \"#81C784\", \"#FFD54F\"];\n      return colors[Math.floor(Math.random() * colors.length)];\n    };\n\n    // 获取相关评论\n    const getCommentsForSentence = sentenceIndex => {\n      return props.comments?.filter(comment => comment.link === sentenceIndex) || [];\n    };\n\n    // 计算弹幕速度\n    const calculateSpeed = text => {\n      const baseSpeed = props.baseSpeed;\n      const lengthFactor = Math.min(text.length / 50, 2);\n      return baseSpeed + Math.random() * 5 * lengthFactor;\n    };\n\n    // 分配弹幕行（修复显示不全问题）\n    const assignDanmuLine = () => {\n      const now = Date.now();\n      const availableLines = [];\n\n      // 找出可用的行\n      for (let i = 0; i < props.maxLines; i++) {\n        if (!lineOccupancy.value[i] || lineOccupancy.value[i] < now) {\n          availableLines.push(i);\n        }\n      }\n      if (availableLines.length > 0) {\n        const lineIndex = availableLines[Math.floor(Math.random() * availableLines.length)];\n        return {\n          lineIndex,\n          top: lineIndex * props.lineHeight + 10\n        };\n      }\n\n      // 没有可用行时选择最久未使用的行\n      let oldestLine = 0;\n      let oldestTime = Infinity;\n      for (let i = 0; i < props.maxLines; i++) {\n        if (lineOccupancy.value[i] < oldestTime) {\n          oldestTime = lineOccupancy.value[i];\n          oldestLine = i;\n        }\n      }\n      return {\n        lineIndex: oldestLine,\n        top: oldestLine * props.lineHeight + 10\n      };\n    };\n\n    // 生成弹幕\n    const generateDanmus = () => {\n      if (props.activeSentence === null || !props.comments) return;\n      const relatedComments = getCommentsForSentence(props.activeSentence);\n      if (relatedComments.length === 0) return;\n\n      // 限制弹幕数量\n      const commentsToShow = relatedComments.slice(0, props.maxDanmus);\n      commentsToShow.forEach(comment => {\n        const {\n          lineIndex,\n          top\n        } = assignDanmuLine();\n        const speed = calculateSpeed(comment.content);\n\n        // 记录行占用时间（动画结束后释放）\n        lineOccupancy.value[lineIndex] = Date.now() + speed * 1000;\n        allDanmus.value.push({\n          id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n          content: comment.content,\n          user: comment.user_nickname || \"匿名用户\",\n          avatar: comment.user_avatar || defaultAvatar,\n          color: getRandomColor(),\n          top: top,\n          speed: speed,\n          createTime: Date.now()\n        });\n      });\n    };\n\n    // 移除弹幕\n    const removeDanmu = id => {\n      allDanmus.value = allDanmus.value.filter(danmu => danmu.id !== id);\n    };\n\n    // 清理过期弹幕\n    const cleanExpiredDanmus = () => {\n      const now = Date.now();\n      allDanmus.value = allDanmus.value.filter(danmu => {\n        return now - danmu.createTime < danmu.speed * 1000 * 1.5;\n      });\n    };\n\n    // 处理头像错误\n    const handleAvatarError = e => {\n      e.target.src = defaultAvatar;\n    };\n\n    // 监听激活句子变化\n    watch(() => props.activeSentence, newVal => {\n      if (newVal !== null) {\n        generateDanmus();\n      }\n    });\n\n    // 监听样式变化重置\n    watch(() => props.styleType, () => {\n      allDanmus.value = [];\n      lineOccupancy.value = Array(props.maxLines).fill(0);\n    });\n\n    // 初始化\n    onMounted(() => {\n      lineOccupancy.value = Array(props.maxLines).fill(0);\n    });\n    const __returned__ = {\n      props,\n      defaultAvatar,\n      danmuContainer,\n      allDanmus,\n      lineOccupancy,\n      visibleDanmus,\n      getRandomColor,\n      getCommentsForSentence,\n      calculateSpeed,\n      assignDanmuLine,\n      generateDanmus,\n      removeDanmu,\n      cleanExpiredDanmus,\n      handleAvatarError,\n      ref,\n      computed,\n      watch,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","onMounted","defaultAvatar","props","__props","danmuContainer","allDanmus","lineOccupancy","visibleDanmus","cleanExpiredDanmus","value","slice","maxDanmus","getRandomColor","colors","Math","floor","random","length","getCommentsForSentence","sentenceIndex","comments","filter","comment","link","calculateSpeed","text","baseSpeed","lengthFactor","min","assignDanmuLine","now","Date","availableLines","i","maxLines","push","lineIndex","top","lineHeight","oldestLine","oldestTime","Infinity","generateDanmus","activeSentence","relatedComments","commentsToShow","forEach","speed","content","id","toString","substr","user","user_nickname","avatar","user_avatar","color","createTime","removeDanmu","danmu","handleAvatarError","e","target","src","newVal","styleType","Array","fill"],"sources":["D:/ZhiHu/zhihu-bullet/wikitable-vue/client/src/components/DanmuDisplay.vue"],"sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"danmu-container\"\r\n\t\tref=\"danmuContainer\"\r\n\t\t:style=\"{\r\n\t\t\t'--container-height': `${maxLines * lineHeight + 20}px`,\r\n\t\t\t'--line-height': `${lineHeight}px`,\r\n\t\t\t'--card-width': `${cardWidth}px`,\r\n\t\t\t'--text-font-size': `${textFontSize}px`,\r\n\t\t\t'--card-font-size': `${cardFontSize}px`,\r\n\t\t\t'--opacity': `${opacity / 100}`\r\n\t\t}\">\r\n\t\t<!-- 文本样式弹幕 -->\r\n\t\t<template v-if=\"styleType === 'text'\">\r\n\t\t\t<div\r\n\t\t\t\tv-for=\"danmu in visibleDanmus\"\r\n\t\t\t\t:key=\"danmu.id\"\r\n\t\t\t\tclass=\"danmu-item danmu-text\"\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\ttop: `${danmu.top}px`,\r\n\t\t\t\t\t'animation-duration': `${danmu.speed}s`,\r\n\t\t\t\t\tcolor: danmu.color,\r\n\t\t\t\t\t'font-size': 'var(--text-font-size)'\r\n\t\t\t\t}\"\r\n\t\t\t\t@animationend=\"removeDanmu(danmu.id)\">\r\n\t\t\t\t{{ danmu.user }}：{{ danmu.content }}\r\n\t\t\t</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 卡片样式弹幕 -->\r\n\t\t<template v-else>\r\n\t\t\t<div\r\n\t\t\t\tv-for=\"danmu in visibleDanmus\"\r\n\t\t\t\t:key=\"danmu.id\"\r\n\t\t\t\tclass=\"danmu-item danmu-card\"\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\ttop: `${danmu.top}px`,\r\n\t\t\t\t\t'animation-duration': `${danmu.speed}s`,\r\n\t\t\t\t\twidth: 'var(--card-width)'\r\n\t\t\t\t}\"\r\n\t\t\t\t@animationend=\"removeDanmu(danmu.id)\">\r\n\t\t\t\t<div class=\"danmu-card-content\">\r\n\t\t\t\t\t<div class=\"danmu-user\" v-if=\"showAvatars\">\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t:src=\"danmu.avatar\"\r\n\t\t\t\t\t\t\tclass=\"avatar\"\r\n\t\t\t\t\t\t\t@error=\"handleAvatarError\" />\r\n\t\t\t\t\t\t<span class=\"username\">{{ danmu.user }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"danmu-text\">{{ danmu.content }}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, watch, onMounted } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tcomments: Array,\r\n\t\tactiveSentence: Number,\r\n\t\tmaxLines: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 3,\r\n\t\t\tvalidator: value => value >= 1 && value <= 8\r\n\t\t},\r\n\t\tlineHeight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 40,\r\n\t\t\tvalidator: value => value >= 30 && value <= 120\r\n\t\t},\r\n\t\tmaxDanmus: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 5,\r\n\t\t\tvalidator: value => value >= 1 && value <= 15\r\n\t\t},\r\n\t\tbaseSpeed: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 10,\r\n\t\t\tvalidator: value => value >= 5 && value <= 30\r\n\t\t},\r\n\t\tstyleType: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"text\",\r\n\t\t\tvalidator: value => [\"text\", \"card\"].includes(value)\r\n\t\t},\r\n\t\tcardWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 280,\r\n\t\t\tvalidator: value => value >= 200 && value <= 400\r\n\t\t},\r\n\t\ttextFontSize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 16,\r\n\t\t\tvalidator: value => value >= 12 && value <= 24\r\n\t\t},\r\n\t\tcardFontSize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 14,\r\n\t\t\tvalidator: value => value >= 12 && value <= 20\r\n\t\t},\r\n\t\topacity: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 85,\r\n\t\t\tvalidator: value => value >= 30 && value <= 100\r\n\t\t},\r\n\t\tshowAvatars: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t}\r\n\t});\r\n\r\n\t// 默认头像\r\n\tconst defaultAvatar =\r\n\t\t\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2NjYyIgZD0iTTEyLDJBMTAsMTAgMCAwLDAgMiwxMkExMCwxMCAwIDAsMCAxMiwyMkExMCwxMCAwIDAsMCAyMiwxMkExMCwxMCAwIDAsMCAxMiwyTTEyLDRBNyA3IDAgMCwxIDE5LDExQTcgNyAwIDAsMSAxMiwxOEE3LDcgMCAwLDEgNSwxMUE3LDcgMCAwLDEgMTIsNE0xMiw2QTUsNSAwIDAsMCA3LDExQTUsNSAwIDAsMCAxMiwxNkE1LDUgMCAwLDAgMTcsMTFBNSw1IDAgMCwwIDEyLDZNMTIsOEEzLDMgMCAwLDEgMTUsMTFBNCw0IDAgMCwxIDEyLDE1QTQsNCAwIDAsMSA5LDExQTMsMyAwIDAsMSAxMiw4WiIvPjwvc3ZnPg==\";\r\n\r\n\t// 弹幕数据\r\n\tconst danmuContainer = ref(null);\r\n\tconst allDanmus = ref([]);\r\n\tconst lineOccupancy = ref([]);\r\n\r\n\t// 计算可见弹幕\r\n\tconst visibleDanmus = computed(() => {\r\n\t\tcleanExpiredDanmus();\r\n\t\treturn allDanmus.value.slice(-props.maxDanmus * 2);\r\n\t});\r\n\r\n\t// 获取随机颜色\r\n\tconst getRandomColor = () => {\r\n\t\tconst colors = [\r\n\t\t\t\"#FF6B6B\",\r\n\t\t\t\"#4ECDC4\",\r\n\t\t\t\"#45B7D1\",\r\n\t\t\t\"#FFA07A\",\r\n\t\t\t\"#98D8C8\",\r\n\t\t\t\"#F06292\",\r\n\t\t\t\"#7986CB\",\r\n\t\t\t\"#9575CD\",\r\n\t\t\t\"#64B5F6\",\r\n\t\t\t\"#4DB6AC\",\r\n\t\t\t\"#81C784\",\r\n\t\t\t\"#FFD54F\"\r\n\t\t];\r\n\t\treturn colors[Math.floor(Math.random() * colors.length)];\r\n\t};\r\n\r\n\t// 获取相关评论\r\n\tconst getCommentsForSentence = sentenceIndex => {\r\n\t\treturn (\r\n\t\t\tprops.comments?.filter(comment => comment.link === sentenceIndex) || []\r\n\t\t);\r\n\t};\r\n\r\n\t// 计算弹幕速度\r\n\tconst calculateSpeed = text => {\r\n\t\tconst baseSpeed = props.baseSpeed;\r\n\t\tconst lengthFactor = Math.min(text.length / 50, 2);\r\n\t\treturn baseSpeed + Math.random() * 5 * lengthFactor;\r\n\t};\r\n\r\n\t// 分配弹幕行（修复显示不全问题）\r\n\tconst assignDanmuLine = () => {\r\n\t\tconst now = Date.now();\r\n\t\tconst availableLines = [];\r\n\r\n\t\t// 找出可用的行\r\n\t\tfor (let i = 0; i < props.maxLines; i++) {\r\n\t\t\tif (!lineOccupancy.value[i] || lineOccupancy.value[i] < now) {\r\n\t\t\t\tavailableLines.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (availableLines.length > 0) {\r\n\t\t\tconst lineIndex =\r\n\t\t\t\tavailableLines[Math.floor(Math.random() * availableLines.length)];\r\n\t\t\treturn {\r\n\t\t\t\tlineIndex,\r\n\t\t\t\ttop: lineIndex * props.lineHeight + 10\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// 没有可用行时选择最久未使用的行\r\n\t\tlet oldestLine = 0;\r\n\t\tlet oldestTime = Infinity;\r\n\t\tfor (let i = 0; i < props.maxLines; i++) {\r\n\t\t\tif (lineOccupancy.value[i] < oldestTime) {\r\n\t\t\t\toldestTime = lineOccupancy.value[i];\r\n\t\t\t\toldestLine = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tlineIndex: oldestLine,\r\n\t\t\ttop: oldestLine * props.lineHeight + 10\r\n\t\t};\r\n\t};\r\n\r\n\t// 生成弹幕\r\n\tconst generateDanmus = () => {\r\n\t\tif (props.activeSentence === null || !props.comments) return;\r\n\r\n\t\tconst relatedComments = getCommentsForSentence(props.activeSentence);\r\n\t\tif (relatedComments.length === 0) return;\r\n\r\n\t\t// 限制弹幕数量\r\n\t\tconst commentsToShow = relatedComments.slice(0, props.maxDanmus);\r\n\r\n\t\tcommentsToShow.forEach(comment => {\r\n\t\t\tconst { lineIndex, top } = assignDanmuLine();\r\n\t\t\tconst speed = calculateSpeed(comment.content);\r\n\r\n\t\t\t// 记录行占用时间（动画结束后释放）\r\n\t\t\tlineOccupancy.value[lineIndex] = Date.now() + speed * 1000;\r\n\r\n\t\t\tallDanmus.value.push({\r\n\t\t\t\tid: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n\t\t\t\tcontent: comment.content,\r\n\t\t\t\tuser: comment.user_nickname || \"匿名用户\",\r\n\t\t\t\tavatar: comment.user_avatar || defaultAvatar,\r\n\t\t\t\tcolor: getRandomColor(),\r\n\t\t\t\ttop: top,\r\n\t\t\t\tspeed: speed,\r\n\t\t\t\tcreateTime: Date.now()\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\t// 移除弹幕\r\n\tconst removeDanmu = id => {\r\n\t\tallDanmus.value = allDanmus.value.filter(danmu => danmu.id !== id);\r\n\t};\r\n\r\n\t// 清理过期弹幕\r\n\tconst cleanExpiredDanmus = () => {\r\n\t\tconst now = Date.now();\r\n\t\tallDanmus.value = allDanmus.value.filter(danmu => {\r\n\t\t\treturn now - danmu.createTime < danmu.speed * 1000 * 1.5;\r\n\t\t});\r\n\t};\r\n\r\n\t// 处理头像错误\r\n\tconst handleAvatarError = e => {\r\n\t\te.target.src = defaultAvatar;\r\n\t};\r\n\r\n\t// 监听激活句子变化\r\n\twatch(\r\n\t\t() => props.activeSentence,\r\n\t\tnewVal => {\r\n\t\t\tif (newVal !== null) {\r\n\t\t\t\tgenerateDanmus();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\t// 监听样式变化重置\r\n\twatch(\r\n\t\t() => props.styleType,\r\n\t\t() => {\r\n\t\t\tallDanmus.value = [];\r\n\t\t\tlineOccupancy.value = Array(props.maxLines).fill(0);\r\n\t\t}\r\n\t);\r\n\r\n\t// 初始化\r\n\tonMounted(() => {\r\n\t\tlineOccupancy.value = Array(props.maxLines).fill(0);\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.danmu-container {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: var(--container-height);\r\n\t\toverflow: visible; /* 改为visible确保完整显示 */\r\n\t\tz-index: 100;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.danmu-item {\r\n\t\tposition: absolute;\r\n\t\tleft: 100%;\r\n\t\ttransform: translateX(0);\r\n\t\twill-change: transform;\r\n\t\tanimation: danmu-move linear forwards;\r\n\t\topacity: var(--opacity);\r\n\t}\r\n\r\n\t/* 文本样式弹幕 */\r\n\t.danmu-text {\r\n\t\tfont-size: var(--text-font-size);\r\n\t\tpadding: 0 15px;\r\n\t\tborder-radius: calc(var(--line-height) / 2);\r\n\t\tbackground-color: rgba(255, 255, 255, 0.85);\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n\t\ttext-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);\r\n\t\theight: var(--line-height);\r\n\t\tline-height: var(--line-height);\r\n\t\twhite-space: nowrap;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t/* 卡片样式弹幕 */\r\n\t.danmu-card {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);\r\n\t\toverflow: hidden;\r\n\t\twidth: var(--card-width);\r\n\t}\r\n\r\n\t.danmu-card-content {\r\n\t\tpadding: 12px;\r\n\t\tfont-size: var(--card-font-size);\r\n\t}\r\n\r\n\t.danmu-user {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 8px;\r\n\t}\r\n\r\n\t.danmu-user .avatar {\r\n\t\twidth: calc(var(--line-height) - 20px);\r\n\t\theight: calc(var(--line-height) - 20px);\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 10px;\r\n\t\tobject-fit: cover;\r\n\t\tbackground-color: #f0f0f0;\r\n\t}\r\n\r\n\t.danmu-user .username {\r\n\t\tfont-weight: bold;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.danmu-card .danmu-text {\r\n\t\tline-height: 1.5;\r\n\t\twhite-space: normal;\r\n\t\tword-break: break-word;\r\n\t\tmax-height: calc(var(--line-height) * 1.5);\r\n\t\toverflow: hidden;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 3;\r\n\t\t-webkit-box-orient: vertical;\r\n\t}\r\n\r\n\t@keyframes danmu-move {\r\n\t\tto {\r\n\t\t\ttransform: translateX(calc(-100vw - var(--card-width, 0px)));\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}