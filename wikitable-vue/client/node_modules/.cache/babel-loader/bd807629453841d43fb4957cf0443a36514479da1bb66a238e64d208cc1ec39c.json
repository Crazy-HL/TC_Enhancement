{"ast":null,"code":"import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-292f6a0b\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"chart-legend-container legend-panel\"\n};\nconst _hoisted_2 = {\n  class: \"chart-group\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"情感分布\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"pie-chart-container\"\n};\nconst _hoisted_5 = {\n  class: \"pie-legend\"\n};\nconst _hoisted_6 = {\n  class: \"legend-label\"\n};\nconst _hoisted_7 = {\n  class: \"chart-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"立场分布\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"bar-chart-container\"\n};\nconst _hoisted_10 = {\n  class: \"bar-chart\"\n};\nconst _hoisted_11 = [\"title\"];\nconst _hoisted_12 = {\n  class: \"bar-legend\"\n};\nconst _hoisted_13 = {\n  class: \"legend-label\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", {\n    class: \"pie-chart\",\n    style: _normalizeStyle($setup.pieChartStyle)\n  }, null, 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.emotionLegend, item => {\n    return _createElementVNode(\"div\", {\n      key: item.label,\n      class: \"legend-item\"\n    }, [_createElementVNode(\"span\", {\n      class: \"legend-color\",\n      style: _normalizeStyle({\n        backgroundColor: item.color\n      })\n    }, null, 4 /* STYLE */), _createElementVNode(\"span\", _hoisted_6, _toDisplayString(item.label) + \" (\" + _toDisplayString($setup.emotionStats[item.key]) + \"%)\", 1 /* TEXT */)]);\n  }), 64 /* STABLE_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.standpointLegend, item => {\n    return _createElementVNode(\"div\", {\n      key: item.label,\n      class: \"bar-segment\",\n      style: _normalizeStyle({\n        height: `${$setup.standpointStats[item.key]}%`,\n        backgroundColor: item.color\n      }),\n      title: `${item.label}: ${$setup.standpointStats[item.key]}%`\n    }, null, 12 /* STYLE, PROPS */, _hoisted_11);\n  }), 64 /* STABLE_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_12, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.standpointLegend, item => {\n    return _createElementVNode(\"div\", {\n      key: item.label,\n      class: \"legend-item\"\n    }, [_createElementVNode(\"span\", {\n      class: \"legend-color\",\n      style: _normalizeStyle({\n        backgroundColor: item.color\n      })\n    }, null, 4 /* STYLE */), _createElementVNode(\"span\", _hoisted_13, _toDisplayString(item.label) + \" (\" + _toDisplayString($setup.standpointStats[item.key]) + \"%)\", 1 /* TEXT */)]);\n  }), 64 /* STABLE_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","style","_normalizeStyle","$setup","pieChartStyle","_hoisted_5","_Fragment","_renderList","emotionLegend","item","key","label","backgroundColor","color","_hoisted_6","_toDisplayString","emotionStats","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","standpointLegend","standpointStats","title","_hoisted_11","_hoisted_12","_hoisted_13"],"sources":["D:\\ZhiHu\\zhihu-bullet\\wikitable-vue\\client\\src\\components\\ChartLegend.vue"],"sourcesContent":["<template>\r\n\t<div class=\"chart-legend-container legend-panel\">\r\n\t\t<div class=\"chart-group\">\r\n\t\t\t<h4>情感分布</h4>\r\n\t\t\t<div class=\"pie-chart-container\">\r\n\t\t\t\t<div class=\"pie-chart\" :style=\"pieChartStyle\"></div>\r\n\t\t\t\t<div class=\"pie-legend\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"item in emotionLegend\"\r\n\t\t\t\t\t\t:key=\"item.label\"\r\n\t\t\t\t\t\tclass=\"legend-item\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"legend-color\"\r\n\t\t\t\t\t\t\t:style=\"{ backgroundColor: item.color }\"></span>\r\n\t\t\t\t\t\t<span class=\"legend-label\"\r\n\t\t\t\t\t\t\t>{{ item.label }} ({{ emotionStats[item.key] }}%)</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"chart-group\">\r\n\t\t\t<h4>立场分布</h4>\r\n\t\t\t<div class=\"bar-chart-container\">\r\n\t\t\t\t<div class=\"bar-chart\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"item in standpointLegend\"\r\n\t\t\t\t\t\t:key=\"item.label\"\r\n\t\t\t\t\t\tclass=\"bar-segment\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\theight: `${standpointStats[item.key]}%`,\r\n\t\t\t\t\t\t\tbackgroundColor: item.color\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t:title=\"`${item.label}: ${standpointStats[item.key]}%`\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"bar-legend\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"item in standpointLegend\"\r\n\t\t\t\t\t\t:key=\"item.label\"\r\n\t\t\t\t\t\tclass=\"legend-item\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"legend-color\"\r\n\t\t\t\t\t\t\t:style=\"{ backgroundColor: item.color }\"></span>\r\n\t\t\t\t\t\t<span class=\"legend-label\"\r\n\t\t\t\t\t\t\t>{{ item.label }} ({{ standpointStats[item.key] }}%)</span\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tcomments: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t});\r\n\r\n\t// 情感数据计算\r\n\tconst emotionStats = computed(() => {\r\n\t\tconst stats = { positive: 0, negative: 0, neutral: 0, total: 0 };\r\n\r\n\t\tprops.comments.forEach(comment => {\r\n\t\t\tif (comment.emotion === 1) stats.positive++;\r\n\t\t\telse if (comment.emotion === -1) stats.negative++;\r\n\t\t\telse stats.neutral++;\r\n\t\t\tstats.total++;\r\n\t\t});\r\n\r\n\t\t// 计算百分比\r\n\t\treturn {\r\n\t\t\tpositive:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.positive / stats.total) * 100) : 0,\r\n\t\t\tnegative:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.negative / stats.total) * 100) : 0,\r\n\t\t\tneutral:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.neutral / stats.total) * 100) : 0\r\n\t\t};\r\n\t});\r\n\r\n\t// 立场数据计算\r\n\tconst standpointStats = computed(() => {\r\n\t\tconst stats = { support: 0, oppose: 0, neutral: 0, total: 0 };\r\n\r\n\t\tprops.comments.forEach(comment => {\r\n\t\t\tif (comment.standpoint === 1) stats.support++;\r\n\t\t\telse if (comment.standpoint === -1) stats.oppose++;\r\n\t\t\telse stats.neutral++;\r\n\t\t\tstats.total++;\r\n\t\t});\r\n\r\n\t\t// 计算百分比\r\n\t\treturn {\r\n\t\t\tsupport:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.support / stats.total) * 100) : 0,\r\n\t\t\toppose:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.oppose / stats.total) * 100) : 0,\r\n\t\t\tneutral:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.neutral / stats.total) * 100) : 0\r\n\t\t};\r\n\t});\r\n\r\n\t// 饼图样式\r\n\tconst pieChartStyle = computed(() => {\r\n\t\treturn {\r\n\t\t\tbackground: `conic-gradient(\r\n      #4CAF50 0% ${emotionStats.value.positive}%,\r\n      #F44336 ${emotionStats.value.positive}% ${\r\n\t\t\t\temotionStats.value.positive + emotionStats.value.negative\r\n\t\t\t}%,\r\n      #FFC107 ${emotionStats.value.positive + emotionStats.value.negative}% 100%\r\n    )`\r\n\t\t};\r\n\t});\r\n\r\n\t// 图注配置\r\n\tconst emotionLegend = [\r\n\t\t{ label: \"积极\", key: \"positive\", color: \"#e41a1c\" },\r\n\t\t{ label: \"消极\", key: \"negative\", color: \"#4daf4a\" },\r\n\t\t{ label: \"中立\", key: \"neutral\", color: \"#377eb8\" }\r\n\t];\r\n\r\n\tconst standpointLegend = [\r\n\t\t{ label: \"支持\", key: \"support\", color: \"#fbb4ae\" },\r\n\t\t{ label: \"反对\", key: \"oppose\", color: \"#ccebc5\" },\r\n\t\t{ label: \"中立\", key: \"neutral\", color: \"#b3cde3\" }\r\n\t];\r\n</script>\r\n\r\n<style scoped>\r\n\t.chart-legend-container {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n\t\tpadding: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 25px;\r\n\t}\r\n\r\n\t.chart-group {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.chart-group h4 {\r\n\t\tmargin: 0 0 15px 0;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #333;\r\n\t\ttext-align: center;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.pie-chart-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 15px;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.pie-chart {\r\n\t\twidth: 100px;\r\n\t\theight: 100px;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.bar-chart-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 15px;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.bar-chart {\r\n\t\twidth: 40px;\r\n\t\theight: 100px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-end;\r\n\t\tbackground: #f5f5f5;\r\n\t\tborder-radius: 4px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.bar-segment {\r\n\t\twidth: 100%;\r\n\t\ttransition: height 0.3s ease;\r\n\t}\r\n\r\n\t.pie-legend,\r\n\t.bar-legend {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8px;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.legend-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.legend-color {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 14px;\r\n\t\theight: 14px;\r\n\t\tborder-radius: 3px;\r\n\t\tmargin-right: 8px;\r\n\t}\r\n\r\n\t.legend-label {\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\t.chart-legend-container {\r\n\t\t\tflex-direction: row;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tgap: 20px;\r\n\t\t}\r\n\r\n\t\t.chart-group {\r\n\t\t\tmin-width: 160px;\r\n\t\t\tflex: 1 1 40%;\r\n\t\t}\r\n\r\n\t\t.pie-chart {\r\n\t\t\twidth: 80px;\r\n\t\t\theight: 80px;\r\n\t\t}\r\n\r\n\t\t.bar-chart {\r\n\t\t\twidth: 30px;\r\n\t\t\theight: 80px;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAqC;;EAC1CA,KAAK,EAAC;AAAa;gEACvBC,mBAAA,CAAa,YAAT,MAAI;;EACHD,KAAK,EAAC;AAAqB;;EAE1BA,KAAK,EAAC;AAAY;;EAQfA,KAAK,EAAC;AAAc;;EAQzBA,KAAK,EAAC;AAAa;gEACvBC,mBAAA,CAAa,YAAT,MAAI;;EACHD,KAAK,EAAC;AAAqB;;EAC1BA,KAAK,EAAC;AAAW;oBAzB1B;;EAoCSA,KAAK,EAAC;AAAY;;EAQfA,KAAK,EAAC;AAAc;;uBA3C/BE,mBAAA,CAkDM,OAlDNC,UAkDM,GAjDLF,mBAAA,CAkBM,OAlBNG,UAkBM,GAjBLC,UAAa,EACbJ,mBAAA,CAeM,OAfNK,UAeM,GAdLL,mBAAA,CAAoD;IAA/CD,KAAK,EAAC,WAAW;IAAEO,KAAK,EALjCC,eAAA,CAKmCC,MAAA,CAAAC,aAAa;2BAC5CT,mBAAA,CAYM,OAZNU,UAYM,I,cAXLT,mBAAA,CAUMU,SAAA,QAjBXC,WAAA,CAQqBJ,MAAA,CAAAK,aAAa,EAArBC,IAAI;WADZd,mBAAA,CAUM;MARJe,GAAG,EAAED,IAAI,CAACE,KAAK;MAChBjB,KAAK,EAAC;QACNC,mBAAA,CAEiD;MADhDD,KAAK,EAAC,cAAc;MACnBO,KAAK,EAbbC,eAAA;QAAAU,eAAA,EAakCH,IAAI,CAACI;MAAK;6BACtClB,mBAAA,CACiE,QADjEmB,UACiE,EAAAC,gBAAA,CAA5DN,IAAI,CAACE,KAAK,IAAG,IAAE,GAAAI,gBAAA,CAAGZ,MAAA,CAAAa,YAAY,CAACP,IAAI,CAACC,GAAG,KAAI,IAAE,gB;wCAOtDf,mBAAA,CA4BM,OA5BNsB,UA4BM,GA3BLC,UAAa,EACbvB,mBAAA,CAyBM,OAzBNwB,UAyBM,GAxBLxB,mBAAA,CAUM,OAVNyB,WAUM,I,cATLxB,mBAAA,CAQ+DU,SAAA,QAlCpEC,WAAA,CA2BqBJ,MAAA,CAAAkB,gBAAgB,EAAxBZ,IAAI;WADZd,mBAAA,CAQ+D;MAN7De,GAAG,EAAED,IAAI,CAACE,KAAK;MAChBjB,KAAK,EAAC,aAAa;MAClBO,KAAK,EA9BZC,eAAA;mBA8BmCC,MAAA,CAAAmB,eAAe,CAACb,IAAI,CAACC,GAAG;yBAA+BD,IAAI,CAACI;;MAIxFU,KAAK,KAAKd,IAAI,CAACE,KAAK,KAAKR,MAAA,CAAAmB,eAAe,CAACb,IAAI,CAACC,GAAG;oCAlCxDc,WAAA;oCAoCI7B,mBAAA,CAYM,OAZN8B,WAYM,I,cAXL7B,mBAAA,CAUMU,SAAA,QA/CXC,WAAA,CAsCqBJ,MAAA,CAAAkB,gBAAgB,EAAxBZ,IAAI;WADZd,mBAAA,CAUM;MARJe,GAAG,EAAED,IAAI,CAACE,KAAK;MAChBjB,KAAK,EAAC;QACNC,mBAAA,CAEiD;MADhDD,KAAK,EAAC,cAAc;MACnBO,KAAK,EA3CbC,eAAA;QAAAU,eAAA,EA2CkCH,IAAI,CAACI;MAAK;6BACtClB,mBAAA,CACoE,QADpE+B,WACoE,EAAAX,gBAAA,CAA/DN,IAAI,CAACE,KAAK,IAAG,IAAE,GAAAI,gBAAA,CAAGZ,MAAA,CAAAmB,eAAe,CAACb,IAAI,CAACC,GAAG,KAAI,IAAE,gB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}