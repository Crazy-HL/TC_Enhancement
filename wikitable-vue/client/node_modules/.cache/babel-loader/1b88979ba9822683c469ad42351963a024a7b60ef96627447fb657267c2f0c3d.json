{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-305a2353\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"article-container\"\n};\nconst _hoisted_2 = {\n  class: \"article-title\"\n};\nconst _hoisted_3 = {\n  class: \"article-meta\"\n};\nconst _hoisted_4 = {\n  class: \"author\"\n};\nconst _hoisted_5 = {\n  class: \"publish-time\"\n};\nconst _hoisted_6 = {\n  class: \"update-time\"\n};\nconst _hoisted_7 = {\n  class: \"article-content-wrapper\"\n};\nconst _hoisted_8 = [\"innerHTML\"];\nconst _hoisted_9 = {\n  class: \"comment-sidebar left-sidebar\"\n};\nconst _hoisted_10 = {\n  class: \"comment-sidebar right-sidebar\"\n};\nconst _hoisted_11 = {\n  class: \"article-footer\"\n};\nconst _hoisted_12 = {\n  class: \"stats\"\n};\nconst _hoisted_13 = {\n  class: \"vote-count\"\n};\nconst _hoisted_14 = {\n  class: \"comment-count\"\n};\nconst _hoisted_15 = [\"href\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $setup.article ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h1\", _hoisted_2, _toDisplayString($setup.article.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", _hoisted_4, \"作者: \" + _toDisplayString($setup.article.user_nickname), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_5, \"发布时间: \" + _toDisplayString($setup.formatTime($setup.article.created_time)), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_6, \"更新时间: \" + _toDisplayString($setup.formatTime($setup.article.updated_time)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n    class: \"article-content\",\n    ref: \"articleContent\",\n    innerHTML: $setup.article.content_text\n  }, null, 8 /* PROPS */, _hoisted_8), _createCommentVNode(\" 左侧评论卡片容器 \"), _createElementVNode(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.leftComments, comment => {\n    return _openBlock(), _createBlock($setup[\"CommentCard\"], {\n      key: comment.comment_id,\n      comment: comment,\n      position: 'left',\n      onHighlight: $setup.highlightText\n    }, null, 8 /* PROPS */, [\"comment\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 右侧评论卡片容器 \"), _createElementVNode(\"div\", _hoisted_10, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.rightComments, comment => {\n    return _openBlock(), _createBlock($setup[\"CommentCard\"], {\n      key: comment.comment_id,\n      comment: comment,\n      position: 'right',\n      onHighlight: $setup.highlightText\n    }, null, 8 /* PROPS */, [\"comment\"]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"span\", _hoisted_13, \"点赞: \" + _toDisplayString($setup.article.voteup_count), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_14, \"评论: \" + _toDisplayString($setup.article.comment_count), 1 /* TEXT */)]), _createElementVNode(\"a\", {\n    href: $setup.article.content_url,\n    target: \"_blank\",\n    class: \"original-link\"\n  }, \"原文链接\", 8 /* PROPS */, _hoisted_15)])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["key","class","$setup","article","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","title","_hoisted_3","_hoisted_4","user_nickname","_hoisted_5","formatTime","created_time","_hoisted_6","updated_time","_hoisted_7","ref","innerHTML","content_text","_hoisted_8","_createCommentVNode","_hoisted_9","_Fragment","_renderList","leftComments","comment","_createBlock","comment_id","position","onHighlight","highlightText","_hoisted_10","rightComments","_hoisted_11","_hoisted_12","_hoisted_13","voteup_count","_hoisted_14","comment_count","href","content_url","target","_hoisted_15"],"sources":["D:\\ZhiHu\\zhihu-bullet\\wikitable-vue\\client\\src\\components\\ArticleContent.vue"],"sourcesContent":["<template>\r\n\t<div class=\"article-container\" v-if=\"article\">\r\n\t\t<h1 class=\"article-title\">{{ article.title }}</h1>\r\n\r\n\t\t<div class=\"article-meta\">\r\n\t\t\t<span class=\"author\">作者: {{ article.user_nickname }}</span>\r\n\t\t\t<span class=\"publish-time\"\r\n\t\t\t\t>发布时间: {{ formatTime(article.created_time) }}</span\r\n\t\t\t>\r\n\t\t\t<span class=\"update-time\"\r\n\t\t\t\t>更新时间: {{ formatTime(article.updated_time) }}</span\r\n\t\t\t>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"article-content-wrapper\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"article-content\"\r\n\t\t\t\tref=\"articleContent\"\r\n\t\t\t\tv-html=\"article.content_text\"></div>\r\n\r\n\t\t\t<!-- 左侧评论卡片容器 -->\r\n\t\t\t<div class=\"comment-sidebar left-sidebar\">\r\n\t\t\t\t<CommentCard\r\n\t\t\t\t\tv-for=\"comment in leftComments\"\r\n\t\t\t\t\t:key=\"comment.comment_id\"\r\n\t\t\t\t\t:comment=\"comment\"\r\n\t\t\t\t\t:position=\"'left'\"\r\n\t\t\t\t\t@highlight=\"highlightText\" />\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 右侧评论卡片容器 -->\r\n\t\t\t<div class=\"comment-sidebar right-sidebar\">\r\n\t\t\t\t<CommentCard\r\n\t\t\t\t\tv-for=\"comment in rightComments\"\r\n\t\t\t\t\t:key=\"comment.comment_id\"\r\n\t\t\t\t\t:comment=\"comment\"\r\n\t\t\t\t\t:position=\"'right'\"\r\n\t\t\t\t\t@highlight=\"highlightText\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"article-footer\">\r\n\t\t\t<div class=\"stats\">\r\n\t\t\t\t<span class=\"vote-count\">点赞: {{ article.voteup_count }}</span>\r\n\t\t\t\t<span class=\"comment-count\">评论: {{ article.comment_count }}</span>\r\n\t\t\t</div>\r\n\t\t\t<a :href=\"article.content_url\" target=\"_blank\" class=\"original-link\"\r\n\t\t\t\t>原文链接</a\r\n\t\t\t>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, computed } from \"vue\";\r\n\timport api from \"@/api\";\r\n\timport CommentCard from \"@/components/CommentCard.vue\";\r\n\r\n\tconst article = ref(null);\r\n\tconst articleContent = ref(null);\r\n\tconst comments = ref([]);\r\n\r\n\t// 模拟API获取评论数据\r\n\tonMounted(() => {\r\n\t\tapi.get(\"article\", {}, data => {\r\n\t\t\tarticle.value = data[0];\r\n\r\n\t\t\t// 获取评论数据\r\n\t\t\tapi.get(\"comments\", {}, data => {\r\n\t\t\t\tcomments.value = data;\r\n\r\n\t\t\t\t// 等待DOM更新后处理评论定位\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tpositionComments();\r\n\t\t\t\t}, 100);\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\t// 将评论分配到左右两侧\r\n\tconst leftComments = computed(() =>\r\n\t\tcomments.value.filter((_, index) => index % 2 === 0)\r\n\t);\r\n\tconst rightComments = computed(() =>\r\n\t\tcomments.value.filter((_, index) => index % 2 !== 0)\r\n\t);\r\n\r\n\t// 定位评论到相关段落\r\n\tconst positionComments = () => {\r\n\t\tif (!articleContent.value) return;\r\n\r\n\t\t// 获取所有段落\r\n\t\tconst paragraphs = articleContent.value.querySelectorAll(\"p\");\r\n\r\n\t\tcomments.value.forEach(comment => {\r\n\t\t\tif (comment.target_paragraph) {\r\n\t\t\t\t// 这里需要根据你的评论数据中存储的目标段落信息来定位\r\n\t\t\t\t// 例如comment.target_paragraph可能是段落索引或ID\r\n\t\t\t\tconst targetPara = paragraphs[comment.target_paragraph];\r\n\t\t\t\tif (targetPara) {\r\n\t\t\t\t\t// 在实际应用中，这里会设置评论卡片的位置\r\n\t\t\t\t\t// 可能需要使用MutationObserver来响应内容变化\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// 高亮相关文本\r\n\tconst highlightText = targetText => {\r\n\t\tif (!articleContent.value) return;\r\n\r\n\t\t// 清除之前的高亮\r\n\t\tconst existingHighlights =\r\n\t\t\tarticleContent.value.querySelectorAll(\".highlighted-text\");\r\n\t\texistingHighlights.forEach(el => {\r\n\t\t\tel.classList.remove(\"highlighted-text\");\r\n\t\t});\r\n\r\n\t\t// 高亮匹配的文本\r\n\t\tconst content = articleContent.value.innerHTML;\r\n\t\tconst highlightedContent = content.replace(\r\n\t\t\tnew RegExp(targetText, \"g\"),\r\n\t\t\t`<span class=\"highlighted-text\">${targetText}</span>`\r\n\t\t);\r\n\t\tarticleContent.value.innerHTML = highlightedContent;\r\n\t};\r\n\r\n\tconst formatTime = time => {\r\n\t\tif (!time) return \"\";\r\n\t\tconst date = new Date(time * 1000);\r\n\t\treturn date.toLocaleString();\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.article-container {\r\n\t\tmax-width: 1200px;\r\n\t\tmargin: 0 auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.article-content-wrapper {\r\n\t\tdisplay: flex;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.article-content {\r\n\t\tflex: 1;\r\n\t\tfont-size: 16px;\r\n\t\tline-height: 1.8;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding: 0 20px;\r\n\t\tmax-width: 800px;\r\n\t\tmargin: 0 auto;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.comment-sidebar {\r\n\t\twidth: 200px;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.left-sidebar {\r\n\t\tleft: 0;\r\n\t}\r\n\r\n\t.right-sidebar {\r\n\t\tright: 0;\r\n\t}\r\n\r\n\t.article-title {\r\n\t\tfont-size: 24px;\r\n\t\tmargin-bottom: 15px;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t.article-meta {\r\n\t\tmargin-bottom: 20px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.article-meta span {\r\n\t\tmargin-right: 15px;\r\n\t}\r\n\r\n\t.article-footer {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding-top: 15px;\r\n\t\tborder-top: 1px solid #eee;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.stats span {\r\n\t\tmargin-right: 15px;\r\n\t}\r\n\r\n\t.original-link {\r\n\t\tcolor: #0084ff;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\t.original-link:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t.highlighted-text {\r\n\t\tbackground-color: #fff8c5;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.highlighted-text::after {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: -2px;\r\n\t\theight: 2px;\r\n\t\tbackground-color: #ffd700;\r\n\t}\r\n</style>\r\n"],"mappings":";;;EAAAA,GAAA;EACMC,KAAK,EAAC;;;EACNA,KAAK,EAAC;AAAe;;EAEpBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAQ;;EACdA,KAAK,EAAC;AAAc;;EAGpBA,KAAK,EAAC;AAAa;;EAKrBA,KAAK,EAAC;AAAyB;mBAdtC;;EAqBQA,KAAK,EAAC;AAA8B;;EAUpCA,KAAK,EAAC;AAA+B;;EAUtCA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAO;;EACXA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAe;oBA5C/B;;SACsCC,MAAA,CAAAC,OAAO,I,cAA5CC,mBAAA,CAiDM,OAjDNC,UAiDM,GAhDLC,mBAAA,CAAkD,MAAlDC,UAAkD,EAAAC,gBAAA,CAArBN,MAAA,CAAAC,OAAO,CAACM,KAAK,kBAE1CH,mBAAA,CAQM,OARNI,UAQM,GAPLJ,mBAAA,CAA2D,QAA3DK,UAA2D,EAAtC,MAAI,GAAAH,gBAAA,CAAGN,MAAA,CAAAC,OAAO,CAACS,aAAa,kBACjDN,mBAAA,CAC0D,QAD1DO,UAC0D,EAAxD,QAAM,GAAAL,gBAAA,CAAGN,MAAA,CAAAY,UAAU,CAACZ,MAAA,CAAAC,OAAO,CAACY,YAAY,mBAE1CT,mBAAA,CAC0D,QAD1DU,UAC0D,EAAxD,QAAM,GAAAR,gBAAA,CAAGN,MAAA,CAAAY,UAAU,CAACZ,MAAA,CAAAC,OAAO,CAACc,YAAY,kB,GAI3CX,mBAAA,CAyBM,OAzBNY,UAyBM,GAxBLZ,mBAAA,CAGqC;IAFpCL,KAAK,EAAC,iBAAiB;IACvBkB,GAAG,EAAC,gBAAgB;IACpBC,SAA6B,EAArBlB,MAAA,CAAAC,OAAO,CAACkB;0BAlBpBC,UAAA,GAoBGC,mBAAA,cAAiB,EACjBjB,mBAAA,CAOM,OAPNkB,UAOM,I,kBANLpB,mBAAA,CAK8BqB,SAAA,QA3BlCC,WAAA,CAuBuBxB,MAAA,CAAAyB,YAAY,EAAvBC,OAAO;yBADfC,YAAA,CAK8B3B,MAAA;MAH5BF,GAAG,EAAE4B,OAAO,CAACE,UAAU;MACvBF,OAAO,EAAEA,OAAO;MAChBG,QAAQ,EAAE,MAAM;MAChBC,WAAS,EAAE9B,MAAA,CAAA+B;;oCAGdV,mBAAA,cAAiB,EACjBjB,mBAAA,CAOM,OAPN4B,WAOM,I,kBANL9B,mBAAA,CAK8BqB,SAAA,QArClCC,WAAA,CAiCuBxB,MAAA,CAAAiC,aAAa,EAAxBP,OAAO;yBADfC,YAAA,CAK8B3B,MAAA;MAH5BF,GAAG,EAAE4B,OAAO,CAACE,UAAU;MACvBF,OAAO,EAAEA,OAAO;MAChBG,QAAQ,EAAE,OAAO;MACjBC,WAAS,EAAE9B,MAAA,CAAA+B;;sCAIf3B,mBAAA,CAQM,OARN8B,WAQM,GAPL9B,mBAAA,CAGM,OAHN+B,WAGM,GAFL/B,mBAAA,CAA8D,QAA9DgC,WAA8D,EAArC,MAAI,GAAA9B,gBAAA,CAAGN,MAAA,CAAAC,OAAO,CAACoC,YAAY,kBACpDjC,mBAAA,CAAkE,QAAlEkC,WAAkE,EAAtC,MAAI,GAAAhC,gBAAA,CAAGN,MAAA,CAAAC,OAAO,CAACsC,aAAa,iB,GAEzDnC,mBAAA,CACe;IADXoC,IAAI,EAAExC,MAAA,CAAAC,OAAO,CAACwC,WAAW;IAAEC,MAAM,EAAC,QAAQ;IAAC3C,KAAK,EAAC;KACnD,MAAI,iBA/CT4C,WAAA,E,OAAAtB,mBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}