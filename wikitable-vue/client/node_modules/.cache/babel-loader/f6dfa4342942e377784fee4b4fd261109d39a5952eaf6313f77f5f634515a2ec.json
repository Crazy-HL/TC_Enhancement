{"ast":null,"code":"import { computed } from \"vue\";\nexport default {\n  __name: 'ChartLegend',\n  props: {\n    comments: {\n      type: Array,\n      required: true\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const typeStats = computed(() => {\n      const stats = {\n        statement: 0,\n        question: 0,\n        exclamation: 0,\n        suggestion: 0,\n        sarcasm: 0,\n        total: 0\n      };\n      props.comments.forEach(comment => {\n        const type = comment.comment_type || 1;\n        if (type === 1) stats.statement++;else if (type === 2) stats.question++;else if (type === 3) stats.exclamation++;else if (type === 4) stats.suggestion++;else if (type === 5) stats.sarcasm++;\n        stats.total++;\n      });\n      return {\n        statement: stats.total > 0 ? Math.round(stats.statement / stats.total * 100) : 0,\n        question: stats.total > 0 ? Math.round(stats.question / stats.total * 100) : 0,\n        exclamation: stats.total > 0 ? Math.round(stats.exclamation / stats.total * 100) : 0,\n        suggestion: stats.total > 0 ? Math.round(stats.suggestion / stats.total * 100) : 0,\n        sarcasm: stats.total > 0 ? Math.round(stats.sarcasm / stats.total * 100) : 0\n      };\n    });\n    const standpointStats = computed(() => {\n      const stats = {\n        support: 0,\n        oppose: 0,\n        neutral: 0,\n        total: 0\n      };\n      props.comments.forEach(comment => {\n        if (comment.standpoint === 1) stats.support++;else if (comment.standpoint === -1) stats.oppose++;else stats.neutral++;\n        stats.total++;\n      });\n      return {\n        support: stats.total > 0 ? Math.round(stats.support / stats.total * 100) : 0,\n        oppose: stats.total > 0 ? Math.round(stats.oppose / stats.total * 100) : 0,\n        neutral: stats.total > 0 ? Math.round(stats.neutral / stats.total * 100) : 0\n      };\n    });\n    const pieChartStyle = computed(() => {\n      return {\n        background: `conic-gradient(\n      #4285f4 0% ${typeStats.value.statement}%,\n      #ea4335 ${typeStats.value.statement}% ${typeStats.value.statement + typeStats.value.question}%,\n      #34a853 ${typeStats.value.statement + typeStats.value.question}% ${typeStats.value.statement + typeStats.value.question + typeStats.value.exclamation}%,\n      #fbbc05 ${typeStats.value.statement + typeStats.value.question + typeStats.value.exclamation}% ${typeStats.value.statement + typeStats.value.question + typeStats.value.exclamation + typeStats.value.suggestion}%,\n      #ff6d00 ${typeStats.value.statement + typeStats.value.question + typeStats.value.exclamation + typeStats.value.suggestion}% 100%\n    )`\n      };\n    });\n    const typeLegend = [{\n      label: \"陈述\",\n      key: \"statement\",\n      color: \"#4285f4\"\n    }, {\n      label: \"疑问\",\n      key: \"question\",\n      color: \"#ea4335\"\n    }, {\n      label: \"感叹\",\n      key: \"exclamation\",\n      color: \"#34a853\"\n    }, {\n      label: \"建议\",\n      key: \"suggestion\",\n      color: \"#fbbc05\"\n    }, {\n      label: \"讽刺\",\n      key: \"sarcasm\",\n      color: \"#ff6d00\"\n    }];\n    const standpointLegend = [{\n      label: \"支持\",\n      key: \"support\",\n      color: \"#ccebc5\"\n    }, {\n      label: \"反对\",\n      key: \"oppose\",\n      color: \"#fbb4ae\"\n    }, {\n      label: \"中立\",\n      key: \"neutral\",\n      color: \"#b3cde3\"\n    }];\n    const __returned__ = {\n      props,\n      typeStats,\n      standpointStats,\n      pieChartStyle,\n      typeLegend,\n      standpointLegend,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","props","__props","typeStats","stats","statement","question","exclamation","suggestion","sarcasm","total","comments","forEach","comment","type","comment_type","Math","round","standpointStats","support","oppose","neutral","standpoint","pieChartStyle","background","value","typeLegend","label","key","color","standpointLegend"],"sources":["D:/ZhiHu/zhihu-bullet/wikitable-vue/client/src/components/ChartLegend.vue"],"sourcesContent":["<template>\r\n\t<div class=\"chart-legend-container mini-legend\">\r\n\t\t<div class=\"chart-group mini-chart-group\">\r\n\t\t\t<div class=\"mini-legend-item\">\r\n\t\t\t\t<div class=\"mini-pie-chart\" :style=\"pieChartStyle\"></div>\r\n\t\t\t\t<div class=\"mini-legend-labels\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"item in typeLegend\"\r\n\t\t\t\t\t\t:key=\"item.label\"\r\n\t\t\t\t\t\tclass=\"mini-legend-label\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"legend-color\"\r\n\t\t\t\t\t\t\t:style=\"{ backgroundColor: item.color }\"></span>\r\n\t\t\t\t\t\t<span class=\"legend-text\">{{ item.label }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"chart-group mini-chart-group\">\r\n\t\t\t<div class=\"mini-legend-item\">\r\n\t\t\t\t<div class=\"mini-bar-chart\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"item in standpointLegend\"\r\n\t\t\t\t\t\t:key=\"item.label\"\r\n\t\t\t\t\t\tclass=\"mini-bar-segment\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\theight: `${standpointStats[item.key]}%`,\r\n\t\t\t\t\t\t\tbackgroundColor: item.color\r\n\t\t\t\t\t\t}\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mini-legend-labels\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"item in standpointLegend\"\r\n\t\t\t\t\t\t:key=\"item.label\"\r\n\t\t\t\t\t\tclass=\"mini-legend-label\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"legend-color\"\r\n\t\t\t\t\t\t\t:style=\"{ backgroundColor: item.color }\"></span>\r\n\t\t\t\t\t\t<span class=\"legend-text\">{{ item.label }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tcomments: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t});\r\n\r\n\tconst typeStats = computed(() => {\r\n\t\tconst stats = {\r\n\t\t\tstatement: 0,\r\n\t\t\tquestion: 0,\r\n\t\t\texclamation: 0,\r\n\t\t\tsuggestion: 0,\r\n\t\t\tsarcasm: 0,\r\n\t\t\ttotal: 0\r\n\t\t};\r\n\r\n\t\tprops.comments.forEach(comment => {\r\n\t\t\tconst type = comment.comment_type || 1;\r\n\t\t\tif (type === 1) stats.statement++;\r\n\t\t\telse if (type === 2) stats.question++;\r\n\t\t\telse if (type === 3) stats.exclamation++;\r\n\t\t\telse if (type === 4) stats.suggestion++;\r\n\t\t\telse if (type === 5) stats.sarcasm++;\r\n\t\t\tstats.total++;\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tstatement:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.statement / stats.total) * 100) : 0,\r\n\t\t\tquestion:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.question / stats.total) * 100) : 0,\r\n\t\t\texclamation:\r\n\t\t\t\tstats.total > 0\r\n\t\t\t\t\t? Math.round((stats.exclamation / stats.total) * 100)\r\n\t\t\t\t\t: 0,\r\n\t\t\tsuggestion:\r\n\t\t\t\tstats.total > 0\r\n\t\t\t\t\t? Math.round((stats.suggestion / stats.total) * 100)\r\n\t\t\t\t\t: 0,\r\n\t\t\tsarcasm:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.sarcasm / stats.total) * 100) : 0\r\n\t\t};\r\n\t});\r\n\r\n\tconst standpointStats = computed(() => {\r\n\t\tconst stats = { support: 0, oppose: 0, neutral: 0, total: 0 };\r\n\r\n\t\tprops.comments.forEach(comment => {\r\n\t\t\tif (comment.standpoint === 1) stats.support++;\r\n\t\t\telse if (comment.standpoint === -1) stats.oppose++;\r\n\t\t\telse stats.neutral++;\r\n\t\t\tstats.total++;\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tsupport:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.support / stats.total) * 100) : 0,\r\n\t\t\toppose:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.oppose / stats.total) * 100) : 0,\r\n\t\t\tneutral:\r\n\t\t\t\tstats.total > 0 ? Math.round((stats.neutral / stats.total) * 100) : 0\r\n\t\t};\r\n\t});\r\n\r\n\tconst pieChartStyle = computed(() => {\r\n\t\treturn {\r\n\t\t\tbackground: `conic-gradient(\r\n      #4285f4 0% ${typeStats.value.statement}%,\r\n      #ea4335 ${typeStats.value.statement}% ${\r\n\t\t\t\ttypeStats.value.statement + typeStats.value.question\r\n\t\t\t}%,\r\n      #34a853 ${typeStats.value.statement + typeStats.value.question}% ${\r\n\t\t\t\ttypeStats.value.statement +\r\n\t\t\t\ttypeStats.value.question +\r\n\t\t\t\ttypeStats.value.exclamation\r\n\t\t\t}%,\r\n      #fbbc05 ${\r\n\t\t\t\ttypeStats.value.statement +\r\n\t\t\t\ttypeStats.value.question +\r\n\t\t\t\ttypeStats.value.exclamation\r\n\t\t\t}% ${\r\n\t\t\t\ttypeStats.value.statement +\r\n\t\t\t\ttypeStats.value.question +\r\n\t\t\t\ttypeStats.value.exclamation +\r\n\t\t\t\ttypeStats.value.suggestion\r\n\t\t\t}%,\r\n      #ff6d00 ${\r\n\t\t\t\ttypeStats.value.statement +\r\n\t\t\t\ttypeStats.value.question +\r\n\t\t\t\ttypeStats.value.exclamation +\r\n\t\t\t\ttypeStats.value.suggestion\r\n\t\t\t}% 100%\r\n    )`\r\n\t\t};\r\n\t});\r\n\r\n\tconst typeLegend = [\r\n\t\t{ label: \"陈述\", key: \"statement\", color: \"#4285f4\" },\r\n\t\t{ label: \"疑问\", key: \"question\", color: \"#ea4335\" },\r\n\t\t{ label: \"感叹\", key: \"exclamation\", color: \"#34a853\" },\r\n\t\t{ label: \"建议\", key: \"suggestion\", color: \"#fbbc05\" },\r\n\t\t{ label: \"讽刺\", key: \"sarcasm\", color: \"#ff6d00\" }\r\n\t];\r\n\r\n\tconst standpointLegend = [\r\n\t\t{ label: \"支持\", key: \"support\", color: \"#ccebc5\" },\r\n\t\t{ label: \"反对\", key: \"oppose\", color: \"#fbb4ae\" },\r\n\t\t{ label: \"中立\", key: \"neutral\", color: \"#b3cde3\" }\r\n\t];\r\n</script>\r\n\r\n<style scoped>\r\n\t.chart-legend-container.mini-legend {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tgap: 15px;\r\n\t\tpadding: 0;\r\n\t\tbackground: transparent;\r\n\t\tbox-shadow: none;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.mini-chart-group {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tgap: 8px;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.mini-legend-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8px;\r\n\t}\r\n\r\n\t.mini-pie-chart {\r\n\t\twidth: 40px;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 50%;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.mini-bar-chart {\r\n\t\twidth: 20px;\r\n\t\theight: 40px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-end;\r\n\t\tbackground: #f5f5f5;\r\n\t\tborder-radius: 3px;\r\n\t\toverflow: hidden;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.mini-bar-segment {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.mini-legend-labels {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 4px;\r\n\t}\r\n\r\n\t.mini-legend-label {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 4px;\r\n\t\tfont-size: 12px;\r\n\t\tline-height: 1.2;\r\n\t}\r\n\r\n\t.legend-color {\r\n\t\twidth: 10px;\r\n\t\theight: 10px;\r\n\t\tborder-radius: 2px;\r\n\t\tflex-shrink: 0;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.legend-text {\r\n\t\twhite-space: nowrap;\r\n\t\tcolor: #555;\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\t.chart-legend-container.mini-legend {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 8px;\r\n\t\t\talign-items: flex-start;\r\n\t\t}\r\n\r\n\t\t.mini-chart-group {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: flex-start;\r\n\t\t}\r\n\r\n\t\t.mini-legend-item {\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: flex-start;\r\n\t\t}\r\n\r\n\t\t.mini-legend-labels {\r\n\t\t\tflex-direction: row;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tgap: 8px;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":"AAgDC,SAASA,QAAQ,QAAQ,KAAK;;;;;;;;;;;;;;IAE9B,MAAMC,KAAK,GAAGC,OAKZ;IAEF,MAAMC,SAAS,GAAGH,QAAQ,CAAC,MAAM;MAChC,MAAMI,KAAK,GAAG;QACbC,SAAS,EAAE,CAAC;QACZC,QAAQ,EAAE,CAAC;QACXC,WAAW,EAAE,CAAC;QACdC,UAAU,EAAE,CAAC;QACbC,OAAO,EAAE,CAAC;QACVC,KAAK,EAAE;MACR,CAAC;MAEDT,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,OAAO,IAAI;QACjC,MAAMC,IAAI,GAAGD,OAAO,CAACE,YAAY,IAAI,CAAC;QACtC,IAAID,IAAI,KAAK,CAAC,EAAEV,KAAK,CAACC,SAAS,EAAE,CAAC,KAC7B,IAAIS,IAAI,KAAK,CAAC,EAAEV,KAAK,CAACE,QAAQ,EAAE,CAAC,KACjC,IAAIQ,IAAI,KAAK,CAAC,EAAEV,KAAK,CAACG,WAAW,EAAE,CAAC,KACpC,IAAIO,IAAI,KAAK,CAAC,EAAEV,KAAK,CAACI,UAAU,EAAE,CAAC,KACnC,IAAIM,IAAI,KAAK,CAAC,EAAEV,KAAK,CAACK,OAAO,EAAE;QACpCL,KAAK,CAACM,KAAK,EAAE;MACd,CAAC,CAAC;MAEF,OAAO;QACNL,SAAS,EACRD,KAAK,CAACM,KAAK,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACC,SAAS,GAAGD,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;QACxEJ,QAAQ,EACPF,KAAK,CAACM,KAAK,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACE,QAAQ,GAAGF,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;QACvEH,WAAW,EACVH,KAAK,CAACM,KAAK,GAAG,CAAC,GACZM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACG,WAAW,GAAGH,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GACnD,CAAC;QACLF,UAAU,EACTJ,KAAK,CAACM,KAAK,GAAG,CAAC,GACZM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACI,UAAU,GAAGJ,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAClD,CAAC;QACLD,OAAO,EACNL,KAAK,CAACM,KAAK,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACK,OAAO,GAAGL,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAAG;MACtE,CAAC;IACF,CAAC,CAAC;IAEF,MAAMQ,eAAe,GAAGlB,QAAQ,CAAC,MAAM;MACtC,MAAMI,KAAK,GAAG;QAAEe,OAAO,EAAE,CAAC;QAAEC,MAAM,EAAE,CAAC;QAAEC,OAAO,EAAE,CAAC;QAAEX,KAAK,EAAE;MAAE,CAAC;MAE7DT,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,OAAO,IAAI;QACjC,IAAIA,OAAO,CAACS,UAAU,KAAK,CAAC,EAAElB,KAAK,CAACe,OAAO,EAAE,CAAC,KACzC,IAAIN,OAAO,CAACS,UAAU,KAAK,CAAC,CAAC,EAAElB,KAAK,CAACgB,MAAM,EAAE,CAAC,KAC9ChB,KAAK,CAACiB,OAAO,EAAE;QACpBjB,KAAK,CAACM,KAAK,EAAE;MACd,CAAC,CAAC;MAEF,OAAO;QACNS,OAAO,EACNf,KAAK,CAACM,KAAK,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACe,OAAO,GAAGf,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;QACtEU,MAAM,EACLhB,KAAK,CAACM,KAAK,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACgB,MAAM,GAAGhB,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;QACrEW,OAAO,EACNjB,KAAK,CAACM,KAAK,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAAEb,KAAK,CAACiB,OAAO,GAAGjB,KAAK,CAACM,KAAK,GAAI,GAAG,CAAC,GAAG;MACtE,CAAC;IACF,CAAC,CAAC;IAEF,MAAMa,aAAa,GAAGvB,QAAQ,CAAC,MAAM;MACpC,OAAO;QACNwB,UAAU,EAAE;AACf,mBAAmBrB,SAAS,CAACsB,KAAK,CAACpB,SAAS;AAC5C,gBAAgBF,SAAS,CAACsB,KAAK,CAACpB,SAAS,KACrCF,SAAS,CAACsB,KAAK,CAACpB,SAAS,GAAGF,SAAS,CAACsB,KAAK,CAACnB,QAAQ;AACxD,gBACgBH,SAAS,CAACsB,KAAK,CAACpB,SAAS,GAAGF,SAAS,CAACsB,KAAK,CAACnB,QAAQ,KAChEH,SAAS,CAACsB,KAAK,CAACpB,SAAS,GACzBF,SAAS,CAACsB,KAAK,CAACnB,QAAQ,GACxBH,SAAS,CAACsB,KAAK,CAAClB,WAAW;AAC/B,gBAEIJ,SAAS,CAACsB,KAAK,CAACpB,SAAS,GACzBF,SAAS,CAACsB,KAAK,CAACnB,QAAQ,GACxBH,SAAS,CAACsB,KAAK,CAAClB,WAAW,KAE3BJ,SAAS,CAACsB,KAAK,CAACpB,SAAS,GACzBF,SAAS,CAACsB,KAAK,CAACnB,QAAQ,GACxBH,SAAS,CAACsB,KAAK,CAAClB,WAAW,GAC3BJ,SAAS,CAACsB,KAAK,CAACjB,UAAU;AAC9B,gBAEIL,SAAS,CAACsB,KAAK,CAACpB,SAAS,GACzBF,SAAS,CAACsB,KAAK,CAACnB,QAAQ,GACxBH,SAAS,CAACsB,KAAK,CAAClB,WAAW,GAC3BJ,SAAS,CAACsB,KAAK,CAACjB,UAAU;AAC9B;MAEE,CAAC;IACF,CAAC,CAAC;IAEF,MAAMkB,UAAU,GAAG,CAClB;MAAEC,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,WAAW;MAAEC,KAAK,EAAE;IAAU,CAAC,EACnD;MAAEF,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,UAAU;MAAEC,KAAK,EAAE;IAAU,CAAC,EAClD;MAAEF,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,aAAa;MAAEC,KAAK,EAAE;IAAU,CAAC,EACrD;MAAEF,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,YAAY;MAAEC,KAAK,EAAE;IAAU,CAAC,EACpD;MAAEF,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,SAAS;MAAEC,KAAK,EAAE;IAAU,CAAC,CACjD;IAED,MAAMC,gBAAgB,GAAG,CACxB;MAAEH,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,SAAS;MAAEC,KAAK,EAAE;IAAU,CAAC,EACjD;MAAEF,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,QAAQ;MAAEC,KAAK,EAAE;IAAU,CAAC,EAChD;MAAEF,KAAK,EAAE,IAAI;MAAEC,GAAG,EAAE,SAAS;MAAEC,KAAK,EAAE;IAAU,CAAC,CACjD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}