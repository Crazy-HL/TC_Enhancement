{"ast":null,"code":"export default {\n  props: {\n    sentence: String,\n    sentenceIndex: Number,\n    highFrequencyWords: Object,\n    showHighlight: Boolean,\n    hasComments: Boolean,\n    commentLevel: Object,\n    highlightContent: Boolean,\n    isActive: Boolean,\n    showMarker: Boolean,\n    commentCount: Number\n  },\n  computed: {\n    words() {\n      // 将句子分割为单词数组\n      return this.sentence.split(/([^\\w\\u4e00-\\u9fa5])/).filter(w => w.trim().length > 0);\n    },\n    commentColor() {\n      const type = this.commentLevel.type;\n      return {\n        1: \"#4285f4\",\n        // 陈述\n        2: \"#ea4335\",\n        // 疑问\n        3: \"#34a853\",\n        // 感叹\n        4: \"#9c27b0\",\n        // 建议\n        5: \"#ff6d00\" // 讽刺\n      }[type] || \"#4285f4\";\n    }\n  },\n  methods: {\n    handleClick() {\n      this.$emit(\"click\", this.sentenceIndex);\n    },\n    isHighFrequencyWord(word) {\n      return word in this.highFrequencyWords;\n    },\n    getStrokeWidth(word) {\n      if (!this.highFrequencyWords || !this.highFrequencyWords[word]) return \"1px\";\n      const frequency = this.highFrequencyWords[word];\n      const frequencies = Object.values(this.highFrequencyWords);\n      const minFrequency = Math.min(...frequencies);\n      const maxFrequency = Math.max(...frequencies);\n\n      // 线性映射频率到1px-4px的线条宽度\n      const minWidth = 1;\n      const maxWidth = 4;\n      const width = minWidth + (frequency - minFrequency) * (maxWidth - minWidth) / (maxFrequency - minFrequency);\n\n      // 确保在范围内\n      return Math.min(maxWidth, Math.max(minWidth, width)) + \"px\";\n    }\n  }\n};","map":{"version":3,"names":["props","sentence","String","sentenceIndex","Number","highFrequencyWords","Object","showHighlight","Boolean","hasComments","commentLevel","highlightContent","isActive","showMarker","commentCount","computed","words","split","filter","w","trim","length","commentColor","type","methods","handleClick","$emit","isHighFrequencyWord","word","getStrokeWidth","frequency","frequencies","values","minFrequency","Math","min","maxFrequency","max","minWidth","maxWidth","width"],"sources":["D:\\ZhiHu\\zhihu-bullet\\wikitable-vue\\client\\src\\components\\HighFrequencyWords.vue"],"sourcesContent":["<template>\r\n\t<span\r\n\t\tclass=\"sentence\"\r\n\t\t:id=\"'sentence-' + sentenceIndex\"\r\n\t\t:class=\"{\r\n\t\t\t'has-comments': hasComments,\r\n\t\t\t'active-sentence': isActive,\r\n\t\t\t'highlight-content': highlightContent && hasComments\r\n\t\t}\"\r\n\t\t@click=\"handleClick\">\r\n\t\t<template v-for=\"(word, wordIndex) in words\" :key=\"wordIndex\">\r\n\t\t\t<span\r\n\t\t\t\tv-if=\"showHighlight && isHighFrequencyWord(word)\"\r\n\t\t\t\tclass=\"circled-word\"\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\t'--stroke-width': getStrokeWidth(word),\r\n\t\t\t\t\t'--circle-color': hasComments ? commentColor : '#FFEB3B'\r\n\t\t\t\t}\"\r\n\t\t\t\t:title=\"`${word} (出现 ${highFrequencyWords[word]} 次)`\">\r\n\t\t\t\t{{ word }}\r\n\t\t\t</span>\r\n\t\t\t<span v-else>{{ word }}</span>\r\n\t\t</template>\r\n\t\t<span v-if=\"commentCount > 0 && showMarker\" class=\"annotation-marker\">\r\n\t\t\t{{ commentCount }}\r\n\t\t</span>\r\n\t</span>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tsentence: String,\r\n\t\t\tsentenceIndex: Number,\r\n\t\t\thighFrequencyWords: Object,\r\n\t\t\tshowHighlight: Boolean,\r\n\t\t\thasComments: Boolean,\r\n\t\t\tcommentLevel: Object,\r\n\t\t\thighlightContent: Boolean,\r\n\t\t\tisActive: Boolean,\r\n\t\t\tshowMarker: Boolean,\r\n\t\t\tcommentCount: Number\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\twords() {\r\n\t\t\t\t// 将句子分割为单词数组\r\n\t\t\t\treturn this.sentence\r\n\t\t\t\t\t.split(/([^\\w\\u4e00-\\u9fa5])/)\r\n\t\t\t\t\t.filter(w => w.trim().length > 0);\r\n\t\t\t},\r\n\t\t\tcommentColor() {\r\n\t\t\t\tconst type = this.commentLevel.type;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t1: \"#4285f4\", // 陈述\r\n\t\t\t\t\t\t2: \"#ea4335\", // 疑问\r\n\t\t\t\t\t\t3: \"#34a853\", // 感叹\r\n\t\t\t\t\t\t4: \"#9c27b0\", // 建议\r\n\t\t\t\t\t\t5: \"#ff6d00\" // 讽刺\r\n\t\t\t\t\t}[type] || \"#4285f4\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleClick() {\r\n\t\t\t\tthis.$emit(\"click\", this.sentenceIndex);\r\n\t\t\t},\r\n\t\t\tisHighFrequencyWord(word) {\r\n\t\t\t\treturn word in this.highFrequencyWords;\r\n\t\t\t},\r\n\t\t\tgetStrokeWidth(word) {\r\n\t\t\t\tif (!this.highFrequencyWords || !this.highFrequencyWords[word])\r\n\t\t\t\t\treturn \"1px\";\r\n\r\n\t\t\t\tconst frequency = this.highFrequencyWords[word];\r\n\t\t\t\tconst frequencies = Object.values(this.highFrequencyWords);\r\n\t\t\t\tconst minFrequency = Math.min(...frequencies);\r\n\t\t\t\tconst maxFrequency = Math.max(...frequencies);\r\n\r\n\t\t\t\t// 线性映射频率到1px-4px的线条宽度\r\n\t\t\t\tconst minWidth = 1;\r\n\t\t\t\tconst maxWidth = 4;\r\n\t\t\t\tconst width =\r\n\t\t\t\t\tminWidth +\r\n\t\t\t\t\t((frequency - minFrequency) * (maxWidth - minWidth)) /\r\n\t\t\t\t\t\t(maxFrequency - minFrequency);\r\n\r\n\t\t\t\t// 确保在范围内\r\n\t\t\t\treturn Math.min(maxWidth, Math.max(minWidth, width)) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.sentence {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline;\r\n\t\tline-height: 1.8;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.sentence:hover {\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.has-comments {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.active-sentence {\r\n\t\tbackground-color: rgba(255, 152, 0, 0.1);\r\n\t}\r\n\r\n\t.highlight-content {\r\n\t\tbackground-color: rgba(66, 133, 244, 0.1);\r\n\t}\r\n\r\n\t.annotation-marker {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-block;\r\n\t\tmin-width: 16px;\r\n\t\theight: 16px;\r\n\t\tline-height: 16px;\r\n\t\tfont-size: 10px;\r\n\t\ttext-align: center;\r\n\t\tcolor: white;\r\n\t\tbackground-color: #ff9800;\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 0 4px;\r\n\t\tmargin-left: 4px;\r\n\t\tvertical-align: super;\r\n\t}\r\n\r\n\t.circled-word {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 0 2px;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.circled-word::before {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\twidth: calc(100% + 8px);\r\n\t\theight: calc(100% + 4px);\r\n\t\tborder: var(--stroke-width) solid var(--circle-color);\r\n\t\tborder-radius: 50%;\r\n\t\tbox-sizing: border-box;\r\n\t\tz-index: -1;\r\n\t\topacity: 0.8;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.circled-word:hover::before {\r\n\t\topacity: 1;\r\n\t\tbox-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\r\n\t}\r\n</style>\r\n"],"mappings":"AA8BC,eAAe;EACdA,KAAK,EAAE;IACNC,QAAQ,EAAEC,MAAM;IAChBC,aAAa,EAAEC,MAAM;IACrBC,kBAAkB,EAAEC,MAAM;IAC1BC,aAAa,EAAEC,OAAO;IACtBC,WAAW,EAAED,OAAO;IACpBE,YAAY,EAAEJ,MAAM;IACpBK,gBAAgB,EAAEH,OAAO;IACzBI,QAAQ,EAAEJ,OAAO;IACjBK,UAAU,EAAEL,OAAO;IACnBM,YAAY,EAAEV;EACf,CAAC;EACDW,QAAQ,EAAE;IACTC,KAAKA,CAAA,EAAG;MACP;MACA,OAAO,IAAI,CAACf,QAAO,CACjBgB,KAAK,CAAC,sBAAsB,EAC5BC,MAAM,CAACC,CAAA,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,MAAK,GAAI,CAAC,CAAC;IACnC,CAAC;IACDC,YAAYA,CAAA,EAAG;MACd,MAAMC,IAAG,GAAI,IAAI,CAACb,YAAY,CAACa,IAAI;MACnC,OACC;QACC,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAQ,CAAE;MACd,CAAC,CAACA,IAAI,KAAK,SAAQ;IAErB;EACD,CAAC;EACDC,OAAO,EAAE;IACRC,WAAWA,CAAA,EAAG;MACb,IAAI,CAACC,KAAK,CAAC,OAAO,EAAE,IAAI,CAACvB,aAAa,CAAC;IACxC,CAAC;IACDwB,mBAAmBA,CAACC,IAAI,EAAE;MACzB,OAAOA,IAAG,IAAK,IAAI,CAACvB,kBAAkB;IACvC,CAAC;IACDwB,cAAcA,CAACD,IAAI,EAAE;MACpB,IAAI,CAAC,IAAI,CAACvB,kBAAiB,IAAK,CAAC,IAAI,CAACA,kBAAkB,CAACuB,IAAI,CAAC,EAC7D,OAAO,KAAK;MAEb,MAAME,SAAQ,GAAI,IAAI,CAACzB,kBAAkB,CAACuB,IAAI,CAAC;MAC/C,MAAMG,WAAU,GAAIzB,MAAM,CAAC0B,MAAM,CAAC,IAAI,CAAC3B,kBAAkB,CAAC;MAC1D,MAAM4B,YAAW,GAAIC,IAAI,CAACC,GAAG,CAAC,GAAGJ,WAAW,CAAC;MAC7C,MAAMK,YAAW,GAAIF,IAAI,CAACG,GAAG,CAAC,GAAGN,WAAW,CAAC;;MAE7C;MACA,MAAMO,QAAO,GAAI,CAAC;MAClB,MAAMC,QAAO,GAAI,CAAC;MAClB,MAAMC,KAAI,GACTF,QAAO,GACN,CAACR,SAAQ,GAAIG,YAAY,KAAKM,QAAO,GAAID,QAAQ,CAAC,IACjDF,YAAW,GAAIH,YAAY,CAAC;;MAE/B;MACA,OAAOC,IAAI,CAACC,GAAG,CAACI,QAAQ,EAAEL,IAAI,CAACG,GAAG,CAACC,QAAQ,EAAEE,KAAK,CAAC,IAAI,IAAI;IAC5D;EACD;AACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}