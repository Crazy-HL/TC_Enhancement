{"ast":null,"code":"export default {\n  props: {\n    sentence: String,\n    sentenceIndex: Number,\n    highFrequencyWords: Object,\n    showHighlight: Boolean,\n    hasComments: Boolean,\n    commentLevel: Object,\n    highlightContent: Boolean,\n    isActive: Boolean,\n    showMarker: Boolean,\n    commentCount: Number\n  },\n  computed: {\n    commentColor() {\n      const type = this.commentLevel.type;\n      return {\n        1: \"#4285f4\",\n        // 陈述\n        2: \"#ea4335\",\n        // 疑问\n        3: \"#34a853\",\n        // 感叹\n        4: \"#9c27b0\",\n        // 建议\n        5: \"#ff6d00\" // 讽刺\n      }[type] || \"#4285f4\";\n    }\n  },\n  methods: {\n    handleClick() {\n      this.$emit(\"click\", this.sentenceIndex);\n    },\n    getStrokeWidth(frequency) {\n      // 根据频率计算线条粗细，控制在1px到4px之间\n      const minFrequency = 1;\n      const maxFrequency = Math.max(...Object.values(this.highFrequencyWords));\n      const minWidth = 1;\n      const maxWidth = 4;\n\n      // 线性映射频率到线条宽度\n      const width = minWidth + (frequency - minFrequency) * (maxWidth - minWidth) / (maxFrequency - minFrequency);\n\n      // 确保在范围内\n      return Math.min(maxWidth, Math.max(minWidth, width)) + \"px\";\n    }\n  }\n};","map":{"version":3,"names":["props","sentence","String","sentenceIndex","Number","highFrequencyWords","Object","showHighlight","Boolean","hasComments","commentLevel","highlightContent","isActive","showMarker","commentCount","computed","commentColor","type","methods","handleClick","$emit","getStrokeWidth","frequency","minFrequency","maxFrequency","Math","max","values","minWidth","maxWidth","width","min"],"sources":["D:\\ZhiHu\\zhihu-bullet\\wikitable-vue\\client\\src\\components\\HighFrequencyWords.vue"],"sourcesContent":["<template>\r\n\t<span\r\n\t\tclass=\"sentence\"\r\n\t\t:id=\"'sentence-' + sentenceIndex\"\r\n\t\t:class=\"{\r\n\t\t\t'has-comments': hasComments,\r\n\t\t\t'active-sentence': isActive,\r\n\t\t\t'highlight-content': highlightContent && hasComments\r\n\t\t}\"\r\n\t\t@click=\"handleClick\">\r\n\t\t<template v-for=\"(word, wordIndex) in sentence.split('')\" :key=\"wordIndex\">\r\n\t\t\t<span\r\n\t\t\t\tv-if=\"showHighlight && word in highFrequencyWords\"\r\n\t\t\t\tclass=\"circled-word\"\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\t'--stroke-width': getStrokeWidth(highFrequencyWords[word]),\r\n\t\t\t\t\t'--circle-color': hasComments ? commentColor : '#FFEB3B'\r\n\t\t\t\t}\"\r\n\t\t\t\t:title=\"`${word} (出现 ${highFrequencyWords[word]} 次)`\">\r\n\t\t\t\t{{ word }}\r\n\t\t\t</span>\r\n\t\t\t<span v-else>{{ word }}</span>\r\n\t\t</template>\r\n\t\t<span v-if=\"commentCount > 0 && showMarker\" class=\"annotation-marker\">\r\n\t\t\t{{ commentCount }}\r\n\t\t</span>\r\n\t</span>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tsentence: String,\r\n\t\t\tsentenceIndex: Number,\r\n\t\t\thighFrequencyWords: Object,\r\n\t\t\tshowHighlight: Boolean,\r\n\t\t\thasComments: Boolean,\r\n\t\t\tcommentLevel: Object,\r\n\t\t\thighlightContent: Boolean,\r\n\t\t\tisActive: Boolean,\r\n\t\t\tshowMarker: Boolean,\r\n\t\t\tcommentCount: Number\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tcommentColor() {\r\n\t\t\t\tconst type = this.commentLevel.type;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t1: \"#4285f4\", // 陈述\r\n\t\t\t\t\t\t2: \"#ea4335\", // 疑问\r\n\t\t\t\t\t\t3: \"#34a853\", // 感叹\r\n\t\t\t\t\t\t4: \"#9c27b0\", // 建议\r\n\t\t\t\t\t\t5: \"#ff6d00\" // 讽刺\r\n\t\t\t\t\t}[type] || \"#4285f4\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleClick() {\r\n\t\t\t\tthis.$emit(\"click\", this.sentenceIndex);\r\n\t\t\t},\r\n\t\t\tgetStrokeWidth(frequency) {\r\n\t\t\t\t// 根据频率计算线条粗细，控制在1px到4px之间\r\n\t\t\t\tconst minFrequency = 1;\r\n\t\t\t\tconst maxFrequency = Math.max(\r\n\t\t\t\t\t...Object.values(this.highFrequencyWords)\r\n\t\t\t\t);\r\n\t\t\t\tconst minWidth = 1;\r\n\t\t\t\tconst maxWidth = 4;\r\n\r\n\t\t\t\t// 线性映射频率到线条宽度\r\n\t\t\t\tconst width =\r\n\t\t\t\t\tminWidth +\r\n\t\t\t\t\t((frequency - minFrequency) * (maxWidth - minWidth)) /\r\n\t\t\t\t\t\t(maxFrequency - minFrequency);\r\n\r\n\t\t\t\t// 确保在范围内\r\n\t\t\t\treturn Math.min(maxWidth, Math.max(minWidth, width)) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.sentence {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline;\r\n\t\tline-height: 1.8;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.sentence:hover {\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.has-comments {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.active-sentence {\r\n\t\tbackground-color: rgba(255, 152, 0, 0.1);\r\n\t}\r\n\r\n\t.highlight-content {\r\n\t\tbackground-color: rgba(66, 133, 244, 0.1);\r\n\t}\r\n\r\n\t.annotation-marker {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-block;\r\n\t\tmin-width: 16px;\r\n\t\theight: 16px;\r\n\t\tline-height: 16px;\r\n\t\tfont-size: 10px;\r\n\t\ttext-align: center;\r\n\t\tcolor: white;\r\n\t\tbackground-color: #ff9800;\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 0 4px;\r\n\t\tmargin-left: 4px;\r\n\t\tvertical-align: super;\r\n\t}\r\n\r\n\t.circled-word {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 0 2px;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.circled-word::before {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\twidth: calc(100% + 8px);\r\n\t\theight: calc(100% + 4px);\r\n\t\tborder: var(--stroke-width) solid var(--circle-color);\r\n\t\tborder-radius: 50%;\r\n\t\tbox-sizing: border-box;\r\n\t\tz-index: -1;\r\n\t\topacity: 0.8;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.circled-word:hover::before {\r\n\t\topacity: 1;\r\n\t\tbox-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\r\n\t}\r\n</style>\r\n"],"mappings":"AA8BC,eAAe;EACdA,KAAK,EAAE;IACNC,QAAQ,EAAEC,MAAM;IAChBC,aAAa,EAAEC,MAAM;IACrBC,kBAAkB,EAAEC,MAAM;IAC1BC,aAAa,EAAEC,OAAO;IACtBC,WAAW,EAAED,OAAO;IACpBE,YAAY,EAAEJ,MAAM;IACpBK,gBAAgB,EAAEH,OAAO;IACzBI,QAAQ,EAAEJ,OAAO;IACjBK,UAAU,EAAEL,OAAO;IACnBM,YAAY,EAAEV;EACf,CAAC;EACDW,QAAQ,EAAE;IACTC,YAAYA,CAAA,EAAG;MACd,MAAMC,IAAG,GAAI,IAAI,CAACP,YAAY,CAACO,IAAI;MACnC,OACC;QACC,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAS;QAAE;QACd,CAAC,EAAE,SAAQ,CAAE;MACd,CAAC,CAACA,IAAI,KAAK,SAAQ;IAErB;EACD,CAAC;EACDC,OAAO,EAAE;IACRC,WAAWA,CAAA,EAAG;MACb,IAAI,CAACC,KAAK,CAAC,OAAO,EAAE,IAAI,CAACjB,aAAa,CAAC;IACxC,CAAC;IACDkB,cAAcA,CAACC,SAAS,EAAE;MACzB;MACA,MAAMC,YAAW,GAAI,CAAC;MACtB,MAAMC,YAAW,GAAIC,IAAI,CAACC,GAAG,CAC5B,GAAGpB,MAAM,CAACqB,MAAM,CAAC,IAAI,CAACtB,kBAAkB,CACzC,CAAC;MACD,MAAMuB,QAAO,GAAI,CAAC;MAClB,MAAMC,QAAO,GAAI,CAAC;;MAElB;MACA,MAAMC,KAAI,GACTF,QAAO,GACN,CAACN,SAAQ,GAAIC,YAAY,KAAKM,QAAO,GAAID,QAAQ,CAAC,IACjDJ,YAAW,GAAID,YAAY,CAAC;;MAE/B;MACA,OAAOE,IAAI,CAACM,GAAG,CAACF,QAAQ,EAAEJ,IAAI,CAACC,GAAG,CAACE,QAAQ,EAAEE,KAAK,CAAC,IAAI,IAAI;IAC5D;EACD;AACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}